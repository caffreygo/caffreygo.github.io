"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7213],{687:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-53667d82",path:"/VueJs3/section1/chapter3.html",title:"Vue.js 3 çš„è®¾è®¡æ€è·¯",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"å£°æ˜å¼åœ°æè¿°UI",slug:"å£°æ˜å¼åœ°æè¿°ui",children:[]},{level:2,title:"æ¸²æŸ“å™¨",slug:"æ¸²æŸ“å™¨",children:[]},{level:2,title:"ç»„ä»¶çš„æœ¬è´¨",slug:"ç»„ä»¶çš„æœ¬è´¨",children:[]},{level:2,title:"æ¨¡æ¿çš„å·¥ä½œåŸç†",slug:"æ¨¡æ¿çš„å·¥ä½œåŸç†",children:[]},{level:2,title:"Vue.jsæ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“",slug:"vue-jsæ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“",children:[]}],filePathRelative:"VueJs3/section1/chapter3.md",git:{updatedTime:1653577344e3,contributors:[{name:"Jerry Chen",email:"caffreygo@163.com",commits:1},{name:"Jinrui Chen",email:"jinrui@kooboo.cn",commits:1}]}}},8865:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});const p=(0,a(6252).uE)('<h1 id="vue-js-3-çš„è®¾è®¡æ€è·¯" tabindex="-1"><a class="header-anchor" href="#vue-js-3-çš„è®¾è®¡æ€è·¯" aria-hidden="true">#</a> Vue.js 3 çš„è®¾è®¡æ€è·¯</h1><h2 id="å£°æ˜å¼åœ°æè¿°ui" tabindex="-1"><a class="header-anchor" href="#å£°æ˜å¼åœ°æè¿°ui" aria-hidden="true">#</a> å£°æ˜å¼åœ°æè¿°UI</h2><p>Vue.js3 ä½œä¸ºä¸€ä¸ªå£°æ˜å¼çš„ UI æ¡†æ¶ï¼Œæä¾›äº†ä¸¤ç§ UI æè¿°æ–¹å¼ï¼š</p><ol><li><p>æ¨¡æ¿ï¼š</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handler<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>JavaScript å¯¹è±¡ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> title <span class="token operator">=</span> <span class="token punctuation">{</span>\n  tag<span class="token operator">:</span> <span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span>\n  props<span class="token operator">:</span> <span class="token punctuation">{</span>\n    onClick<span class="token operator">:</span> handler\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  children<span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span> tag<span class="token operator">:</span> <span class="token string">&#39;span&#39;</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li></ol><p>ä½¿ç”¨ JavaScript å¯¹è±¡æè¿° UI æ›´åŠ çµæ´»ï¼Œè€Œè¿™å°±æ˜¯æ‰€è°“çš„<strong>è™šæ‹Ÿ DOM</strong>ï¼Œåœ¨ Vue.js3 å½“ä¸­ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶å½“ä¸­æ‰‹å†™çš„æ¸²æŸ“å‡½æ•°å°±æ˜¯ä½¿ç”¨è™šæ‹Ÿ DOM æ¥æè¿° UI çš„</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onClick<span class="token operator">:</span> handler <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// hå‡½æ•°è¿”å›å°±æ˜¯VNode</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="æ¸²æŸ“å™¨" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“å™¨" aria-hidden="true">#</a> æ¸²æŸ“å™¨</h2><p>ğŸ”¥ æ¸²æŸ“å™¨ï¼šå°† JavaScript å¯¹è±¡å³è™šæ‹Ÿ DOM æ¸²æŸ“ä¸ºçœŸå®çš„ DOM</p><ol><li>åˆ›å»ºå…ƒç´ ï¼šæŠŠ vnode.tag ä½œä¸ºæ ‡ç­¾åæ¥åˆ›å»º DOM å…ƒç´ </li><li>ä¸ºå…ƒç´ æ·»åŠ å±æ€§å’Œäº‹ä»¶ï¼šéå† vnode.props å¯¹è±¡ï¼Œå¦‚æœ key ä»¥ on å­—ç¬¦å¼€å¤´ï¼Œè¯´æ˜å®ƒæ˜¯ä¸€ä¸ªäº‹ä»¶é€šè¿‡ addEventListener ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°</li><li>å¤„ç†childrenï¼šå¦‚æœ children æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé€’å½’è°ƒç”¨ renderer ç»§ç»­æ¸²æŸ“ï¼›å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œä»¥æ–‡æœ¬èŠ‚ç‚¹å¤„ç†ã€‚æœ€ç»ˆæ·»åŠ åˆ°æ–°åˆ›å»ºçš„å…ƒç´ å†…</li></ol><blockquote><p>æ¸²æŸ“å™¨çš„ç²¾é«“åœ¨äºåç»­çš„æ›´æ–°ï¼Œé€šè¿‡ Diff ç®—æ³•æ‰¾å‡ºå˜æ›´ç‚¹ï¼Œå¹¶ä¸”åªä¼šæ›´æ–°éœ€è¦æ›´æ–°çš„å†…å®¹ã€‚</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ä½¿ç”¨ vnode.tag ä½œä¸ºæ ‡ç­¾åç§°åˆ›å»º DOM å…ƒç´ </span>\n\t<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>\n  <span class="token comment">// éå† vnode.props å°†å±æ€§ã€äº‹ä»¶æ·»åŠ åˆ° DOM å…ƒç´ </span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> vnode<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// å¦‚æœ key ä»¥ on å¼€å¤´ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒæ˜¯äº‹ä»¶</span>\n      el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>\n        key<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// äº‹ä»¶åç§° onClick ---&gt; click</span>\n        vnode<span class="token punctuation">.</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token comment">// äº‹ä»¶å¤„ç†å‡½æ•°</span>\n      <span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// å¤„ç† children</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å¦‚æœ children æ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯å…ƒç´ çš„æ–‡æœ¬å­èŠ‚ç‚¹</span>\n    el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// é€’å½’åœ°è°ƒç”¨ renderer å‡½æ•°æ¸²æŸ“å­èŠ‚ç‚¹ï¼Œä½¿ç”¨å½“å‰å…ƒç´  el ä½œä¸ºæŒ‚è½½ç‚¹</span>\n    vnode<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token function">renderer</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// å°†å…ƒç´ æ·»åŠ åˆ°æŒ‚è½½ç‚¹ä¸‹</span>\n  container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>\n  tag<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n  props<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  children<span class="token operator">:</span> <span class="token string">&#39;click me&#39;</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">renderer</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><hr><p>ğŸ“Œ ä»¥ä¸Šå°±æ˜¯æ¸²æŸ“å™¨åˆ›å»ºèŠ‚ç‚¹çš„ä¸€ä¸ªæ€è·¯ï¼Œæ¸²æŸ“å™¨çš„ç²¾é«“åœ¨äºèŠ‚ç‚¹çš„æ›´æ–°ï¼Œå¦‚æœ vnode çš„æ›´æ”¹å¦‚ä¸‹ï¼Œæ¸²æŸ“å™¨çš„æ›´æ–°åº”è¯¥åªæ›´æ–°å½“å‰è¿™ä¸ªå…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œè€Œä¸æ˜¯å†èµ°ä¸€éå®Œæ•´çš„å…ƒç´ åˆ›å»ºæµç¨‹</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>\n  tag<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n  props<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello jerry&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  children<span class="token operator">:</span> <span class="token string">&#39;click again&#39;</span>  <span class="token comment">// ä» click me æ”¹æˆ click again</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="ç»„ä»¶çš„æœ¬è´¨" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çš„æœ¬è´¨" aria-hidden="true">#</a> ç»„ä»¶çš„æœ¬è´¨</h2><p>ğŸ”¥ ç»„ä»¶å°±æ˜¯ä¸€ç»„ DOM å…ƒç´ çš„å°è£…</p><ol><li><p>è¿™ç»„ DOM å…ƒç´ ä»£å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¡¨ç¤ºï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">MyComponent</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    tag<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n    props<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    children<span class="token operator">:</span> <span class="token string">&#39;click me&#39;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>ç»„ä»¶ä¹Ÿä¸ä¸€å®šéœ€è¦å‡½æ•°æ¥è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ JavaScript å¯¹è±¡æ¥è¡¨ç¤ºï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n      tag<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n      props<span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>\n      <span class="token punctuation">}</span><span class="token punctuation">,</span>\n      children<span class="token operator">:</span> <span class="token string">&#39;click me&#39;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>\n  tag<span class="token operator">:</span> MyComponent\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// è¯´æ˜ vnode æè¿°çš„æ˜¯æ ‡ç­¾å…ƒç´ </span>\n    <span class="token function">mountElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>tag <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// è¯´æ˜ vnode æè¿°çš„æ˜¯ç»„ä»¶</span>\n    <span class="token function">mountComponent</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> container<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">mountElement</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ä½¿ç”¨ vnode.tag ä½œä¸ºæ ‡ç­¾åç§°åˆ›å»º DOM å…ƒç´ </span>\n\t<span class="token keyword">const</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>\n  <span class="token comment">// éå† vnode.props å°†å±æ€§ã€äº‹ä»¶æ·»åŠ åˆ° DOM å…ƒç´ </span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> vnode<span class="token punctuation">.</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^on</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// å¦‚æœ key ä»¥ on å¼€å¤´ï¼Œé‚£ä¹ˆè¯´æ˜å®ƒæ˜¯äº‹ä»¶</span>\n      el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>\n        key<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// äº‹ä»¶åç§° onClick ---&gt; click</span>\n        vnode<span class="token punctuation">.</span>props<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token comment">// äº‹ä»¶å¤„ç†å‡½æ•°</span>\n      <span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// å¤„ç† children</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vnode<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å¦‚æœ children æ˜¯å­—ç¬¦ä¸²ï¼Œè¯´æ˜æ˜¯å…ƒç´ çš„æ–‡æœ¬å­èŠ‚ç‚¹</span>\n    el<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// é€’å½’åœ°è°ƒç”¨ renderer å‡½æ•°æ¸²æŸ“å­èŠ‚ç‚¹ï¼Œä½¿ç”¨å½“å‰å…ƒç´  el ä½œä¸ºæŒ‚è½½ç‚¹</span>\n    vnode<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token operator">=&gt;</span> <span class="token function">renderer</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> el<span class="token punctuation">)</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment">// å°†å…ƒç´ æ·»åŠ åˆ°æŒ‚è½½ç‚¹ä¸‹</span>\n  container<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼Œè·å–ç»„ä»¶è¦æ¸²æŸ“çš„å†…å®¹ï¼ˆè™šæ‹Ÿ DOMï¼‰</span>\n  <span class="token keyword">const</span> subtree <span class="token operator">=</span> vnode<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token comment">// é€’å½’è°ƒç”¨ renderer æ¸²æŸ“ subtree</span>\n  <span class="token function">renderer</span><span class="token punctuation">(</span>subtree<span class="token punctuation">,</span> container<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token function">renderer</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div></li></ol><p>ğŸ”– Vue.js ä¸­çš„æœ‰çŠ¶æ€ç»„ä»¶å°±æ˜¯ä½¿ç”¨å¯¹è±¡ç»“æ„æ¥è¡¨è¾¾çš„</p><h2 id="æ¨¡æ¿çš„å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ¿çš„å·¥ä½œåŸç†" aria-hidden="true">#</a> æ¨¡æ¿çš„å·¥ä½œåŸç†</h2><p><img src="https://raw.githubusercontent.com/caffreygo/static/main/blog/Vuejs3/design.png" alt=""></p><p>ğŸ”¥ å£°æ˜å¼ UI çš„æè¿°æ–¹å¼æœ‰ä¸¤ç§ï¼Œæ¨¡æ¿å’Œè™šæ‹Ÿ DOM (æ¸²æŸ“å‡½æ•°) ï¼Œç¼–è¯‘å™¨å°†æ¨¡æ¿è¿™ä¸ªå­—ç¬¦ä¸²åˆ†æç”Ÿæˆä¸€ä¸ªåŠŸèƒ½ä¸ä¹‹ç›¸åŒçš„æ¸²æŸ“å‡½æ•°ã€‚</p><p>åœ¨å•æ–‡ä»¶ç»„ä»¶å½“ä¸­ï¼Œæˆ‘ä»¬å†™çš„æ¨¡æ¿æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°å¹¶æ·»åŠ åˆ° script æ ‡ç­¾å—çš„ç»„ä»¶å¯¹è±¡ä¸Šï¼š</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hander<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    click\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n  methods<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æœ€ç»ˆåœ¨æµè§ˆå™¨é‡Œè¿è¡Œçš„ä»£ç ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n  methods<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">/*...*/</span><span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> onClick<span class="token operator">:</span> handler <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;click me&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="vue-jsæ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“" tabindex="-1"><a class="header-anchor" href="#vue-jsæ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“" aria-hidden="true">#</a> Vue.jsæ˜¯å„ä¸ªæ¨¡å—ç»„æˆçš„æœ‰æœºæ•´ä½“</h2><p>ğŸ”¥ ç¼–è¯‘å™¨ä¸æ¸²æŸ“å™¨äº¤æµçš„åª’ä»‹å°±æ˜¯è™šæ‹Ÿ DOM å¯¹è±¡</p><p>ğŸš€ æœ‰äº†ç¼–è¯‘å™¨å’Œæ¸²æŸ“å™¨ï¼Œå·§å¦™åˆ©ç”¨ç¼–è¯‘å™¨çš„<strong>ä»£ç åˆ†æ</strong>èƒ½åŠ›ï¼Œä¸ºæ¸²æŸ“èŠ‚çœå¯»æ‰¾å˜æ›´ç‚¹çš„å·¥ä½œé‡ï¼Œå®ç°æ€§èƒ½çš„æå‡ï¼š</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cls<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ä»¥ä¸Šé¢è¿™ä¸ªæ¨¡æ¿ä¸ºä¾‹ï¼Œç¼–è¯‘å™¨åœ¨å°†å…¶ç¼–è¯‘ä¸ºæ¸²æŸ“å‡½æ•°æ—¶ï¼Œå¯ä»¥åˆ†æå‡ºå“ªäº›æ˜¯åŠ¨æ€å†…å®¹ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œä¿¡æ¯æå–ï¼Œç„¶åç›´æ¥æäº¤ç»™æ¸²æŸ“å™¨</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    tag<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n    props<span class="token operator">:</span> <span class="token punctuation">{</span>\n      id<span class="token operator">:</span> <span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span>\n      <span class="token keyword">class</span><span class="token operator">:</span> cls\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    patchFlags<span class="token operator">:</span> <span class="token number">1</span>  <span class="token comment">// å‡è®¾æ•°å­— 1 ä»£è¡¨ class æ˜¯åŠ¨æ€çš„</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>é€šè¿‡æ·»åŠ çš„ä¿¡æ¯è¯´æ˜åªæœ‰ class å±æ€§ä¼šå‘ç”Ÿæ”¹å˜</p>',32),t={render:function(n,s){return p}}}}]);