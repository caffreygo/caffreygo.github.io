

# æ­£åˆ™è¡¨è¾¾å¼

## åŸºç¡€çŸ¥è¯†

::: tip æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular expressionï¼‰æ˜¯ç”¨äºåŒ¹é…å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ã€‚

- æ­£åˆ™è¡¨è¾¾å¼æ˜¯åœ¨å®¿ä¸»ç¯å¢ƒä¸‹è¿è¡Œçš„ï¼Œå¦‚`js/php/node.js` ç­‰
- åœ¨ JavaScriptä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯å¯¹è±¡

:::

### å¯¹æ¯”åˆ†æ

ä¸æ™®é€šå‡½æ•°æ“ä½œå­—ç¬¦ä¸²æ¥æ¯”è¾ƒï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥å†™å‡ºæ›´ç®€æ´ã€åŠŸèƒ½å¼ºå¤§çš„ä»£ç ã€‚

ä¸‹é¢ä½¿ç”¨è·å–å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰æ•°å­—æ¥æ¯”è¾ƒå‡½æ•°ä¸æ­£åˆ™çš„å·®å¼‚ã€‚

```js
let str = "jerrychen2200hello9988";
let nums = [...str].filter(a => !Number.isNaN(parseInt(a))); // è¿‡æ»¤å‡ºæ•°å­—æ•°ç»„
console.log(nums.join(""));  // 22009988
```

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†ç®€å•å¾—å¤š

```js
let str = "jerrychen2200hello9988";
console.log(str.match(/\d/g).join("")); // 22009988
```

### åˆ›å»ºæ­£åˆ™

ğŸ“— JSæä¾›å­—é¢é‡ä¸å¯¹è±¡ä¸¤ç§æ–¹å¼åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼

#### å­—é¢é‡åˆ›å»º

ä½¿ç”¨`//`åŒ…è£¹çš„å­—é¢é‡åˆ›å»ºæ–¹å¼æ˜¯æ¨èçš„ä½œæ³•ï¼Œä½†å®ƒä¸èƒ½åœ¨å…¶ä¸­ä½¿ç”¨å˜é‡

```js
let site = "caffreygo.com";
console.log(/f/.test(site)); // æ˜¯å¦å«æœ‰få­—æ¯ï¼štrue
```

ä¸‹é¢å°è¯•ä½¿ç”¨ `a` å˜é‡æ—¶å°†ä¸å¯ä»¥æŸ¥è¯¢

```js
let site = "caffreygo.com";
let b = "f";
console.log(/b/.test(str)); // false
```

ğŸ“Œ è™½ç„¶å¯ä»¥ä½¿ç”¨ `eval` è½¬æ¢ä¸ºjsè¯­æ³•æ¥å®ç°å°†å˜é‡è§£æåˆ°æ­£åˆ™ä¸­ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦

 ğŸ’¡ æ‰€ä»¥æœ‰å˜é‡æ—¶å»ºè®®ä½¿ç”¨ä¸‹é¢çš„å¯¹è±¡åˆ›å»ºæ–¹å¼

```js
let str = "caffreygo.com";
let a = "u";
console.log(eval(`/${a}/`).test(str)); //true
```

#### å¯¹è±¡åˆ›å»º

å½“æ­£åˆ™éœ€è¦åŠ¨æ€åˆ›å»ºæ—¶ä½¿ç”¨å¯¹è±¡æ–¹æ³•

æ­£åˆ™æ‹¥æœ‰`test`æ–¹æ³•æµ‹è¯•å­—ç¬¦ä¸²å‚æ•°æ˜¯å¦åŒ¹é…

```js
let site = "caffreygo.com";
let name = "caffreygo";
let reg = new RegExp(name); // æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°
console.log(reg.test(site)); // true
```

ğŸ’¡ æ ¹æ®ç”¨æˆ·è¾“å…¥é«˜äº®æ˜¾ç¤ºå†…å®¹ï¼Œæ”¯æŒç”¨æˆ·è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼

```html
<body>
  <div id="content">caffreygo.com</div>
</body>
<script>
  const content = prompt("è¯·è¾“å…¥è¦æœç´¢çš„å†…å®¹ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼");
  const reg = new RegExp(content, "g");
  let body = document
    .querySelector("#content")
    .innerHTML.replace(reg, str => {
      return `<span style="color:red">${str}</span>`;
    });
  document.body.innerHTML = body;
</script>
```

é€šè¿‡å¯¹è±¡åˆ›å»ºæ­£åˆ™æå–æ ‡ç­¾

```html
<body>
  <h1>caffreygo.com</h1>
  <h1>strcms.com</h1>
</body>

<script>
function element(tag) {
  const html = document.body.innerHTML;
  let reg = new RegExp("<(" + tag + ")>.+</\\1>", "g");
  return html.match(reg);
}
console.table(element("h1"));
```

### é€‰æ‹©ç¬¦

`|` è¿™ä¸ªç¬¦å·å¸¦è¡¨**é€‰æ‹©ä¿®é‡Šç¬¦**ï¼Œä¹Ÿå°±æ˜¯ `|` å·¦å³ä¸¤ä¾§æœ‰ä¸€ä¸ªåŒ¹é…åˆ°å°±å¯ä»¥ã€‚

**åŸå­ç»„**å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å°æ‹¬å·()åŠæ‰€åŒ…æ‹¬çš„å†…å®¹

æ£€æµ‹ç”µè¯æ˜¯å¦æ˜¯ä¸Šæµ·æˆ–åŒ—äº¬çš„åæœº

```js
let tel = "010-12345678";

// é”™è¯¯ç»“æœï¼šåªåŒ¹é… | å·¦å³ä¸¤è¾¹ä»»ä¸€ç»“æœ
console.log(tel.match(/010|020\-\d{7,8}/));
// ["010", index: 0, input: "010-12345678", groups: undefined]

// æ­£ç¡®ç»“æœï¼šæ‰€ä»¥éœ€è¦æ”¾åœ¨åŸå­ç»„ä¸­ä½¿ç”¨
console.log(tel.match(/(010|020)\-\d{7,8}/));
// ["010-12345678", "010", index: 0, input: "010-12345678", groups: undefined]
```

åŒ¹é…å­—ç¬¦æ˜¯å¦åŒ…å«`world` æˆ– `hello`

```js
const str = "hiworld";
console.log(/world|hello/.test(str)); //true
```

### å­—ç¬¦è½¬ä¹‰

ğŸ“— è½¬ä¹‰ç”¨äºæ”¹å˜å­—ç¬¦çš„å«ä¹‰ï¼Œç”¨æ¥å¯¹æŸä¸ªå­—ç¬¦æœ‰å¤šç§è¯­ä¹‰æ—¶çš„å¤„ç†ã€‚

å‡å¦‚æœ‰è¿™æ ·çš„åœºæ™¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡æ­£åˆ™æŸ¥æ‰¾`/`ç¬¦å·ï¼Œä½†æ˜¯ `/`åœ¨æ­£åˆ™ä¸­æœ‰ç‰¹æ®Šçš„æ„ä¹‰ã€‚å¦‚æœå†™æˆ`///`è¿™ä¼šé€ æˆè§£æé”™è¯¯ï¼Œæ‰€ä»¥è¦ä½¿ç”¨è½¬ä¹‰è¯­æ³• `/\//`æ¥åŒ¹é…ã€‚

```js
const url = "https://www.caffreygo.com";
console.log(/https:\/\//.test(url)); //true
```

ğŸ“Œ ä½¿ç”¨ `RegExp` æ„å»ºæ­£åˆ™æ—¶åœ¨è½¬ä¹‰ä¸Šä¼šæœ‰äº›åŒºåˆ«ï¼Œä¸‹é¢æ˜¯å¯¹è±¡ä¸å­—é¢é‡å®šä¹‰æ­£åˆ™æ—¶åŒºåˆ«

```js
let price = 12.23;
//å«ä¹‰1: . é™¤æ¢è¡Œå¤–ä»»ä½•å­—ç¬¦ 	å«ä¹‰2: .æ™®é€šç‚¹
//å«ä¹‰1: d å­—æ¯d   		    å«ä¹‰2: \d æ•°å­— 0~9
console.log(/\d+\.\d+/.test(price));

//å­—ç¬¦ä¸²ä¸­ \d ä¸ d æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥åœ¨ new RegExp æ—¶\d å³ä¸º d
console.log("\d" == "d");

//ä½¿ç”¨å¯¹è±¡å®šä¹‰æ­£åˆ™æ—¶ï¼Œå¯ä»¥å…ˆæŠŠå­—ç¬¦ä¸²æ‰“å°ä¸€æ ·ï¼Œç»“æœæ˜¯å­—é¢é‡ä¸€æ ·çš„å®šä¹‰å°±å¯¹äº†
console.log("\\d+\\.\\d+");   // \d+\.\d+
let reg = new RegExp("\\d+\\.\\d+");
console.log(reg.test(price));
```

ä¸‹é¢æ˜¯ç½‘å€æ£€æµ‹ä¸­è½¬ä¹‰ç¬¦ä½¿ç”¨

```js
let url = "https://www.caffreygo.com";
console.log(/https?:\/\/\w+\.\w+\.\w+/.test(url));
```

### å­—ç¬¦è¾¹ç•Œ

ğŸ“— ä½¿ç”¨å­—ç¬¦è¾¹ç•Œç¬¦ç”¨äºæ§åˆ¶åŒ¹é…å†…å®¹çš„å¼€å§‹ä¸ç»“æŸçº¦å®šã€‚

| è¾¹ç•Œç¬¦ | è¯´æ˜                         |
| ------ | ---------------------------- |
| ^      | åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹             |
| $      | åŒ¹é…å­—ç¬¦ä¸²çš„ç»“æŸï¼Œå¿½ç•¥æ¢è¡Œç¬¦ |

åŒ¹é…å†…å®¹å¿…é¡»ä»¥`www`å¼€å§‹

```js
const str = "www.caffreygo.com";
console.log(/^www/.test(str)); //true
```

åŒ¹é…å†…å®¹å¿…é¡»ä»¥`.com`ç»“æŸ

```js
const str = "www.caffreygo.com";
console.log(/\.com$/.test(str)); //true
```

æ£€æµ‹ç”¨æˆ·åé•¿åº¦ä¸º3~6ä½ï¼Œä¸”åªèƒ½ä¸ºå­—æ¯ã€‚å¦‚æœä¸ä½¿ç”¨ `^ä¸$` é™åˆ¶å°†å¾—ä¸åˆ°æ­£ç¡®ç»“æœ

```html
<body>
  <input type="text" name="username" />
</body>

<script>
  document
    .querySelector(`[name="username"]`)
    .addEventListener("keyup", function() {
      let res = this.value.match(/^[a-z]{3,6}$/i);
      console.log(res);
      console.log(res ? "æ­£ç¡®" : "å¤±è´¥");
    });
</script>
```

## å…ƒå­å­—ç¬¦

ğŸ“— å…ƒå­—ç¬¦æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„**æœ€å°å…ƒç´ **ï¼Œåªä»£è¡¨å•ä¸€ï¼ˆä¸€ä¸ªï¼‰å­—ç¬¦

### å­—ç¬¦åˆ—è¡¨

| å…ƒå­—ç¬¦ | è¯´æ˜                                                 | ç¤ºä¾‹          |
| ------ | ---------------------------------------------------- | ------------- |
| \d     | åŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—                                     | [0-9]         |
| \D     | ä¸é™¤äº†æ•°å­—ä»¥å¤–çš„ä»»ä½•ä¸€ä¸ªå­—ç¬¦åŒ¹é…                     | [^0-9]        |
| \w     | ä¸ä»»æ„ä¸€ä¸ªè‹±æ–‡å­—æ¯,æ•°å­—æˆ–ä¸‹åˆ’çº¿åŒ¹é…                  | [a-zA-Z_]     |
| \W     | é™¤äº†å­—æ¯,æ•°å­—æˆ–ä¸‹åˆ’çº¿å¤–ä¸ä»»ä½•å­—ç¬¦åŒ¹é…                | [^a-zA-Z_]    |
| \s     | ä»»æ„ä¸€ä¸ªç©ºç™½å­—ç¬¦åŒ¹é…ï¼Œå¦‚ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦`\t`ï¼Œæ¢è¡Œç¬¦`\n` | [\n\f\r\t\v]  |
| \S     | é™¤äº†ç©ºç™½ç¬¦å¤–ä»»æ„ä¸€ä¸ªå­—ç¬¦åŒ¹é…                         | [^\n\f\r\t\v] |
| .      | åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»æ„å­—ç¬¦                             |               |

### ä½¿ç”¨ä½“éªŒ

åŒ¹é…ä»»æ„æ•°å­—`string.match(regexp)`

```js
let str = "hellowrold 2010";
console.log(str.match(/\d/g)); //["2", "0", "1", "0"]
```

åŒ¹é…æ‰€æœ‰ç”µè¯å·ç 

```js
let str = "å¼ ä¸‰:010-99999999,æå››:020-88888888";

let res = str.match(/\d{3}-\d{7,8}/g);
console.log(res);   // ["010-99999999", "020-88888888"]
```

è·å–æ‰€æœ‰ç”¨æˆ·å

```js
let str = "å¼ ä¸‰:010-99999999,æå››:020-88888888";

let res = str.match(/[^:\d-,]+/g); 
// [^:\d-,]è¡¨ç¤ºåŒ¹é…é™¤äº† : æ•°å­— - , è¿™äº›å­—ç¬¦ä¹‹å¤–çš„éƒ¨åˆ†
console.log(res);
```

åŒ¹é…ä»»æ„éæ•°å­—

```js
console.log(/\D/.test(2029)); //false
```

åŒ¹é…å­—æ¯æ•°å­—ä¸‹åˆ’çº¿

```js
let str = "hello@";
console.log(str.match(/\w/g)); //Â ["h", "e", "l", "l", "o"]
```

åŒ¹é…é™¤äº†å­—æ¯,æ•°å­—æˆ–ä¸‹åˆ’çº¿å¤–ä¸ä»»ä½•å­—ç¬¦åŒ¹é…

```js
console.log(/\W/.test("@")); //true
```

åŒ¹é…ä¸ä»»æ„ä¸€ä¸ªç©ºç™½å­—ç¬¦åŒ¹é…

```js
console.log(/\s/.test(" ")); //true
console.log(/\s/.test("\n")); //true
```

åŒ¹é…é™¤äº†ç©ºç™½ç¬¦å¤–ä»»æ„ä¸€ä¸ªå­—ç¬¦åŒ¹é…

```js
let str = "hi123 @";
console.log(str.match(/\S/g)); // ["h", "i", "1", "2", "3", "@"]
```

å¦‚æœè¦åŒ¹é…ç‚¹åˆ™éœ€è¦è½¬ä¹‰

```js
let str = `caffreygo@com`;
console.log(/caffreygo.com/i.test(str)); //true
console.log(/houdunren\.com/i.test(str)); //false
```

ğŸ“—`.`åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–ä»»æ„å­—ç¬¦äº†ï¼Œä¸‹é¢åŒ¹é…ä¸åˆ°`test.com` å› ä¸ºæœ‰æ¢è¡Œç¬¦

```js
const url = `https://www.caffreygo.com
  test.com
`;
console.log(url.match(/.+/));
// ["  https://www.caffreygo.com", index: 1, input: "\n  https://www.caffreygo.com\n  test.com\n", groups: undefined]
```

ä½¿ç”¨`/s`è§†ä¸ºå•è¡Œæ¨¡å¼ï¼ˆå¿½ç•¥æ¢è¡Œï¼‰æ—¶ï¼Œ`.` å¯ä»¥åŒ¹é…æ‰€æœ‰

```js
let str = `
  <span>
    hello
    jerry
  </span>
`;
let res = str.match(/<span>.*<\/span>/s);
console.log(res[0]); 
```

æ­£åˆ™ä¸­ç©ºæ ¼ä¼šæŒ‰æ™®é€šå­—ç¬¦å¯¹å¾…

```js
let tel = `010 - 999999`;
console.log(/\d+-\d+/.test(tel)); // false
console.log(/\d+ - \d+/.test(tel)); // true
```

### æ‰€æœ‰å­—ç¬¦

å¯ä»¥ä½¿ç”¨ `[\s\S]` æˆ– `[\d\D]` æ¥åŒ¹é…æ‰€æœ‰å­—ç¬¦

```js
let str = `
  <span>
    houdunren
    strcms
  </span>
`;
let res = str.match(/<span>[\s\S]+<\/span>/);
console.log(res[0]);
```