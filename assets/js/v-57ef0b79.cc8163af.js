"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1826],{4132:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t={key:"v-57ef0b79",path:"/VueJs3/section4/chapter12.html",title:"ç»„ä»¶çš„å®ç°åŸç†",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"æ¸²æŸ“ç»„ä»¶",slug:"æ¸²æŸ“ç»„ä»¶",children:[{level:3,title:"ç»„ä»¶ç±»å‹èŠ‚ç‚¹",slug:"ç»„ä»¶ç±»å‹èŠ‚ç‚¹",children:[]},{level:3,title:"æ¸²æŸ“å™¨å¤„ç†ç»„ä»¶",slug:"æ¸²æŸ“å™¨å¤„ç†ç»„ä»¶",children:[]},{level:3,title:"ç»„ä»¶æ¥å£è®¾è®¡",slug:"ç»„ä»¶æ¥å£è®¾è®¡",children:[]}]},{level:2,title:"ç»„ä»¶çŠ¶æ€ä¸è‡ªæ›´æ–°",slug:"ç»„ä»¶çŠ¶æ€ä¸è‡ªæ›´æ–°",children:[{level:3,title:"ç»„ä»¶çŠ¶æ€è®¾è®¡",slug:"ç»„ä»¶çŠ¶æ€è®¾è®¡",children:[]},{level:3,title:"ç»„ä»¶çš„è‡ªæ›´æ–°",slug:"ç»„ä»¶çš„è‡ªæ›´æ–°",children:[]}]},{level:2,title:"ç»„ä»¶çš„å®ä¾‹ä¸ç”Ÿå‘½å‘¨æœŸ",slug:"ç»„ä»¶çš„å®ä¾‹ä¸ç”Ÿå‘½å‘¨æœŸ",children:[{level:3,title:"ç»„ä»¶å®ä¾‹",slug:"ç»„ä»¶å®ä¾‹",children:[]},{level:3,title:"å£°æ˜å‘¨æœŸå‡½æ•°",slug:"å£°æ˜å‘¨æœŸå‡½æ•°",children:[]}]},{level:2,title:"props ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°",slug:"props-ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°",children:[{level:3,title:"props ä¸ attrs",slug:"props-ä¸-attrs",children:[]},{level:3,title:"è¢«åŠ¨æ›´æ–°",slug:"è¢«åŠ¨æ›´æ–°",children:[]},{level:3,title:"æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡",slug:"æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡",children:[]}]},{level:2,title:"setup å‡½æ•°çš„ä½œç”¨ä¸å®ç°",slug:"setup-å‡½æ•°çš„ä½œç”¨ä¸å®ç°",children:[{level:3,title:"setup å‡½æ•°",slug:"setup-å‡½æ•°",children:[]},{level:3,title:"setup å®ç°",slug:"setup-å®ç°",children:[]}]},{level:2,title:"ç»„ä»¶äº‹ä»¶ä¸ emit å®ç°",slug:"ç»„ä»¶äº‹ä»¶ä¸-emit-å®ç°",children:[]},{level:2,title:"æ’æ§½çš„å·¥ä½œåŸç†åŠå®ç°",slug:"æ’æ§½çš„å·¥ä½œåŸç†åŠå®ç°",children:[]},{level:2,title:"æ³¨å†Œç”Ÿå‘½å‘¨æœŸ",slug:"æ³¨å†Œç”Ÿå‘½å‘¨æœŸ",children:[]},{level:2,title:"æ€»ç»“",slug:"æ€»ç»“",children:[]}],filePathRelative:"VueJs3/section4/chapter12.md",git:{updatedTime:1654099083e3,contributors:[{name:"Jinrui Chen",email:"jinrui@kooboo.cn",commits:3},{name:"Jerry Chen",email:"caffreygo@163.com",commits:1}]}}},1098:(n,s,a)=>{a.r(s),a.d(s,{default:()=>Y});var t=a(6252);const p=(0,t.uE)('<h1 id="ç»„ä»¶çš„å®ç°åŸç†" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çš„å®ç°åŸç†" aria-hidden="true">#</a> ç»„ä»¶çš„å®ç°åŸç†</h1><p>æ¸²æŸ“å™¨ä¸»è¦è´Ÿè´£å°†è™šæ‹Ÿ DOM æ¸²æŸ“ä¸ºçœŸå® DOMï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨è™šæ‹Ÿ DOM æ¥æè¿°æœ€ç»ˆè¦å‘ˆç°çš„çœŸå® DOM å³å¯ã€‚</p><p>ä½†å½“æˆ‘ä»¬ç¼–å†™æ¯”è¾ƒå¤æ‚çš„é¡µé¢æ—¶ï¼Œç”¨æ¥æè¿°é¡µé¢ç»“æ„çš„è™šæ‹Ÿ DOM çš„ä»£ç é‡ä¼šè¶Šæ¥è¶Šå¤šï¼Œæˆ–è€…è¯´é¡µé¢æ¨¡æ¿ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç»„ä»¶åŒ–çš„èƒ½åŠ›ã€‚</p><p>æœ‰äº†ç»„ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ä¸ªå¤§çš„é¡µé¢æ‹†åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½å¯ä»¥ä½œä¸ºå•ç‹¬çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å…±åŒç»„æˆå®Œæ•´çš„é¡µé¢ã€‚ç»„ä»¶åŒ–çš„å®ç°åŒæ ·éœ€è¦æ¸²æŸ“å™¨çš„æ”¯æŒã€‚</p><h2 id="æ¸²æŸ“ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“ç»„ä»¶" aria-hidden="true">#</a> æ¸²æŸ“ç»„ä»¶</h2><blockquote><ul><li>ä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹çš„ <code>vnode.type</code> å±æ€§æ¥å­˜å‚¨ç»„ä»¶å¯¹è±¡ï¼Œæ¸²æŸ“å™¨æ ¹æ®è™šæ‹ŸèŠ‚ç‚¹çš„è¯¥å±æ€§çš„ç±»å‹æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ç»„ä»¶ã€‚</li><li>å¦‚æœæ˜¯ç»„ä»¶ï¼Œåˆ™æ¸²æŸ“å™¨ä¼šè°ƒç”¨ <code>mountComponent</code> å’Œ <code>patchComponent</code> æ¥å®Œæˆç»„ä»¶çš„æŒ‚è½½å’Œæ›´æ–°ã€‚</li></ul></blockquote><h3 id="ç»„ä»¶ç±»å‹èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶ç±»å‹èŠ‚ç‚¹" aria-hidden="true">#</a> ç»„ä»¶ç±»å‹èŠ‚ç‚¹</h3><p>ä»<strong>ç”¨æˆ·è§’åº¦</strong>æ¥çœ‹ï¼Œä¸€ä¸ª<strong>æœ‰çŠ¶æ€ç»„ä»¶</strong>å°±æ˜¯ä¸€ä¸ª<strong>é€‰é¡¹å¯¹è±¡</strong>ï¼Œå¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// MyComponent æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒçš„å€¼æ˜¯ä¸€ä¸ªé€‰é¡¹å¯¹è±¡</span>\n<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&#39;MyComponent&#39;</span><span class="token punctuation">,</span>\n    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ä»<strong>æ¸²æŸ“å™¨è§’åº¦</strong>æ¥çœ‹ï¼Œä¸€ä¸ªç»„ä»¶åˆ™æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„è™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token comment">// &#39;div&#39; | Fragemnt | Text...</span>\n\ttype<span class="token operator">:</span> MyComponent<span class="token punctuation">,</span>\n    <span class="token comment">// ...</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">Â </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="æ¸²æŸ“å™¨å¤„ç†ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“å™¨å¤„ç†ç»„ä»¶" aria-hidden="true">#</a> æ¸²æŸ“å™¨å¤„ç†ç»„ä»¶</h3><p><strong>æ¸²æŸ“å™¨</strong>ä¼šä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹çš„ type å±æ€§æ¥åŒºåˆ†å…¶ç±»å‹ã€‚å¯¹äºä¸åŒçš„èŠ‚ç‚¹ï¼Œå°±éœ€è¦é‡‡ç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•æ¥å®ŒæˆæŒ‚è½½å’Œæ›´æ–°ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">patch</span><span class="token punctuation">(</span><span class="token parameter">n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>n1 <span class="token operator">&amp;&amp;</span> n1<span class="token punctuation">.</span>type <span class="token operator">!==</span> n2<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token function">unmount</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span>\n        n1 <span class="token operator">=</span> <span class="token keyword">null</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> n2\n    \n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// ä½œä¸ºæ™®é€šå…ƒç´ å¤„ç†</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> Text<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// ä½œä¸ºæ–‡æœ¬èŠ‚ç‚¹å¤„ç†</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> Fragment<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// ä½œä¸ºç‰‡æ®µå¤„ç†</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// component</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>n1<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token function">mountComponent</span><span class="token punctuation">(</span>n2<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            <span class="token function">patchComponent</span><span class="token punctuation">(</span>n1<span class="token punctuation">,</span> n2<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><div class="highlight-line">Â </div><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>é€šè¿‡åœ¨ patch å‡½æ•°ä¸­å¯¹ç»„ä»¶ç±»å‹é€»è¾‘åˆ†æ”¯çš„è¡¥å……ï¼Œæ¸²æŸ“å™¨å› æ­¤æœ‰äº†å¤„ç†ç»„ä»¶çš„èƒ½åŠ›ã€‚</p><h3 id="ç»„ä»¶æ¥å£è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶æ¥å£è®¾è®¡" aria-hidden="true">#</a> ç»„ä»¶æ¥å£è®¾è®¡</h3><div class="custom-container tip"><p class="custom-container-title">æ¥ä¸‹æ¥ï¼Œè¦è®¾è®¡ç»„ä»¶åœ¨ç”¨æˆ·å±‚é¢çš„æ¥å£</p><ol><li>ç”¨æˆ·åº”è¯¥å¦‚ä½•ç¼–å†™ç»„ä»¶ï¼Ÿ</li><li>ç»„ä»¶çš„é€‰é¡¹å¯¹è±¡å¿…é¡»åŒ…å«å“ªäº›å†…å®¹ï¼Ÿ</li><li>ç»„ä»¶æ‹¥æœ‰å“ªäº›èƒ½åŠ›ï¼Ÿ</li></ol></div><p>ğŸš€ ç»„ä»¶æœ¬èº«æ˜¯å¯¹é¡µé¢å†…å®¹çš„å°è£…ï¼Œå®ƒç”¨æ¥æè¿°é¡µé¢å†…å®¹çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œä¸€ä¸ªç»„ä»¶<strong>å¿…é¡»åŒ…å«ä¸€ä¸ªæ¸²æŸ“å‡½æ•°</strong>ï¼Œå³ render å‡½æ•°ï¼Œå¹¶ä¸”æ¸²æŸ“å‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯è™šæ‹Ÿ DOMã€‚</p><p>æ¢å¥è¯è¯´ï¼Œ<strong>ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°å°±æ˜¯ç”¨æ¥æè¿°ç»„ä»¶æ‰€æ¸²æŸ“å†…å®¹çš„æ¥å£</strong>ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// vnode.type</span>\n<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&#39;MyComponent&#39;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ï¼Œå…¶è¿”å›å€¼å¿…é¡»ä¸ºè™šæ‹Ÿ DOM</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            type<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n            children<span class="token operator">:</span> <span class="token string">&#39;æˆ‘æ˜¯æ–‡æœ¬&#39;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç»„ä»¶å®ä¾‹ã€‚æœ‰äº†åŸºæœ¬çš„ç»„ä»¶ç»“æ„ä¹‹åï¼Œæ¸²æŸ“å™¨å°±å¯ä»¥å®Œæˆç»„ä»¶çš„æ¸²æŸ“ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ç»„ä»¶ç±»å‹çš„ VNode</span>\n<span class="token keyword">const</span> CompVNode <span class="token operator">=</span> <span class="token punctuation">{</span>\n    type<span class="token operator">:</span> MyComponent<span class="token punctuation">,</span>  <span class="token comment">// ä¸Šé¢å£°æ˜çš„ç»„ä»¶å¯¹è±¡</span>\n<span class="token punctuation">}</span>\n<span class="token comment">// è°ƒç”¨æ¸²æŸ“å™¨æ¥æ¸²æŸ“ç»„ä»¶</span>\nrenderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>CompVNode<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ¸²æŸ“å™¨ä¸­çœŸæ­£å®Œæˆç»„ä»¶æ¸²æŸ“çš„æ˜¯ mountComponent å‡½æ•°ï¼Œå…¶å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n\t<span class="token comment">// é€šè¿‡ vnode è·å–ç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ï¼Œå³ vnode.type</span>\n    <span class="token keyword">const</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token comment">// è·å–ç»„ä»¶çš„ render å‡½æ•°</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> render <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n    <span class="token comment">// æ‰§è¡Œ renderå‡½æ•°ï¼Œå¾—åˆ°ç»„ä»¶è¦æ¸²æŸ“å†…å®¹çš„è™šæ‹Ÿ DOM</span>\n    <span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token comment">// æŒ‚è½½ç»„ä»¶å†…å®¹åˆ°çˆ¶èŠ‚ç‚¹</span>\n    <span class="token function">patch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†æœ€åŸºæœ¬çš„ç»„ä»¶åŒ–æ–¹æ¡ˆã€‚</p><h2 id="ç»„ä»¶çŠ¶æ€ä¸è‡ªæ›´æ–°" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çŠ¶æ€ä¸è‡ªæ›´æ–°" aria-hidden="true">#</a> ç»„ä»¶çŠ¶æ€ä¸è‡ªæ›´æ–°</h2><blockquote><ul><li>åœ¨ç»„ä»¶çš„æŒ‚è½½é˜¶æ®µï¼Œä¼šä¸ºç»„ä»¶åˆ›å»ºä¸€ä¸ªç”¨äºæ¸²æŸ“å…¶å†…å®¹çš„å‰¯ä½œç”¨å‡½æ•°ã€‚è¯¥å‰¯ä½œç”¨å‡½æ•°ä¼šä¸ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®å»ºç«‹å“åº”è”ç³»ã€‚å½“ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘æ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œï¼Œå³é‡æ–°æ¸²æŸ“ã€‚</li><li>é»˜è®¤æƒ…å†µä¸‹é‡æ–°æ¸²æŸ“æ˜¯é‡æ–°æ‰§è¡Œçš„ï¼Œè¿™å¯¼è‡´æ— æ³•å»é‡ï¼Œå› æ­¤æˆ‘ä»¬åœ¨åˆ›å»ºæ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°æ—¶ï¼Œåˆ¶å®šäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„è°ƒç”¨å™¨ã€‚è¯¥è°ƒåº¦å™¨çš„ä½œç”¨æ˜¯ï¼šå½“ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†æ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°ç¼“å†²åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</li><li>æœ‰äº†ç¼“å†²é˜Ÿåˆ—ï¼Œæˆ‘ä»¬å³å¯å®ç°å¯¹æ¸²æŸ“ä»»åŠ¡çš„å»é‡ï¼Œä»è€Œé¿å…æ— ç”¨çš„é‡æ–°æ¸²æŸ“æ‰€å¯¼è‡´çš„é¢å¤–æ€§èƒ½å¼€é”€ã€‚</li></ul></blockquote><h3 id="ç»„ä»¶çŠ¶æ€è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çŠ¶æ€è®¾è®¡" aria-hidden="true">#</a> ç»„ä»¶çŠ¶æ€è®¾è®¡</h3><p>ä¸ºç»„ä»¶è®¾è®¡è‡ªèº«çš„çŠ¶æ€ï¼šä¸ºç»„ä»¶å¯¹è±¡è¡¥å……ä¸€ä¸ª data å‡½æ•°ï¼Œå°†å…¶è¿”å›å€¼ä½œä¸ºç»„ä»¶çš„çŠ¶æ€</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&#39;MyComponent&#39;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ç”¨ data å‡½æ•°æ¥å®šä¹‰ç»„ä»¶è‡ªèº«çš„çŠ¶æ€</span>\n    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            foo<span class="token operator">:</span> <span class="token string">&#39;hello world&#39;</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            type<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n            children<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo çš„å€¼æ˜¯ï¼š </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>  <span class="token comment">// åœ¨renderå‡½æ•°ä¸­ä½¿ç”¨ç»„ä»¶çŠ¶æ€</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ğŸ“ ä»¥ä¸Šä»£ç çº¦å®šç”¨æˆ·å¿…é¡»ä½¿ç”¨ data å‡½æ•°æ¥å®šä¹‰ç»„ä»¶è‡ªèº«çš„çŠ¶æ€ï¼ŒåŒæ—¶å¯ä»¥åœ¨æ¸²æŸ“å‡½æ•°ä¸­é€šè¿‡ this è®¿é—®ç”± data å‡½æ•°è¿”å›çš„çŠ¶æ€æ•°æ®ã€‚</p><p>ä¸‹é¢ä»£ç å®ç°äº†ç»„ä»¶è‡ªèº«<strong>çŠ¶æ€çš„åˆå§‹åŒ–</strong>ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n    \n    <span class="token comment">// è°ƒç”¨ data å‡½æ•°è·å¾—ç»„ä»¶çŠ¶æ€ï¼Œå¹¶å°†å…¶åŒ…è£…ä¸ºå“åº”å¼æ•°æ®</span>\n    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token comment">// å°† render å‡½æ•°çš„ this è®¾ç½®ä¸ºç»„å°†çŠ¶æ€å¯¹è±¡</span>\n\t<span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> state<span class="token punctuation">)</span>\n    <span class="token function">patch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><details class="custom-container details"><summary>å®ç°ç»„ä»¶è‡ªèº«çŠ¶æ€çš„åˆå§‹åŒ–</summary><ol><li>é€šè¿‡ç»„ä»¶çš„é€‰é¡¹å¯¹è±¡å–å¾— data å‡½æ•°å¹¶æ‰§è¡Œï¼Œç„¶åè°ƒç”¨ reactive å‡½æ•°å°† data å‡½æ•°è¿”å›çš„çŠ¶æ€åŒ…è£…ä¸ºå“åº”å¼æ•°æ®ï¼›</li><li>åœ¨è°ƒç”¨ render å‡½æ•°æ—¶ï¼Œå°†å…¶ this çš„æŒ‡å‘è®¾ç½®ä¸ºå“åº”å¼æ•°æ® stateï¼ŒåŒæ—¶å°† state ä½œä¸º render å‡½æ•°è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚</li></ol></details><p>âœ… ç»è¿‡è¿™ä¸¤ä¸ªæ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å°±å®ç°äº†å¯¹ç»„ä»¶è‡ªèº«<strong>çŠ¶æ€</strong>çš„æ”¯æŒï¼Œä»¥åŠåœ¨æ¸²æŸ“å‡½æ•°å†…<strong>è®¿é—®</strong>ç»„ä»¶è‡ªèº«çŠ¶æ€çš„èƒ½åŠ›ã€‚</p><h3 id="ç»„ä»¶çš„è‡ªæ›´æ–°" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çš„è‡ªæ›´æ–°" aria-hidden="true">#</a> ç»„ä»¶çš„è‡ªæ›´æ–°</h3><p>å½“ç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æœ‰èƒ½åŠ›è§¦å‘ç»„ä»¶æ›´æ–°ï¼Œå³ç»„ä»¶çš„è‡ªæ›´æ–°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ•´ä¸ªæ¸²æŸ“ä»»åŠ¡åŒ…è£…åˆ°ä¸€ä¸ª effect ä¸­ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n\n    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n    <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        <span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> state<span class="token punctuation">)</span>\n        <span class="token function">patch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿™æ ·ï¼Œæ•°æ®ä¸€æ—¦å˜åŒ–ï¼Œé‚£ä¹ˆæ¸²æŸ“ä»»åŠ¡ä¾¿ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœå¤šæ¬¡æ”¹å˜å“åº”å¼æ•°æ®çš„å€¼ï¼Œä¼šå¯¼è‡´æ¸²æŸ“å‡½æ•°æ‰§è¡Œå¤šæ¬¡ï¼Œè¿™å®é™…ä¸Šæ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚</p><p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœºåˆ¶æ˜¯çš„æ— è®ºå“åº”å¼æ•°æ®è¿›è¡Œå¤šå°‘æ¬¡ä¿®æ”¹ï¼Œå‰¯ä½œç”¨å‡½æ•°éƒ½åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚è¿™ä¸ªå€ŸåŠ©ä¹‹å‰çš„<strong>è°ƒåº¦å™¨</strong>å³å¯å®ç°ï¼š</p>',40),e=(0,t.Uk)("ğŸŒ "),o={href:"https://www.ijerrychen.com/VueJs3/section2/chapter4.html#%E8%B0%83%E5%BA%A6%E6%89%A7%E8%A1%8C",target:"_blank",rel:"noopener noreferrer"},c=(0,t.Uk)("è°ƒåº¦å™¨ (opens new window)"),l=(0,t.uE)('<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼ŒSet å¯è‡ªåŠ¨å»é‡</span>\n<span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment">// ä¸€ä¸ªæ ‡å¿—ï¼Œä»£è¡¨æ˜¯å¦æ­£åœ¨åˆ·æ–°ä»»åŠ¡é˜Ÿåˆ—</span>\n<span class="token keyword">let</span> isFlushing <span class="token operator">=</span> <span class="token boolean">false</span>\n<span class="token comment">// åˆ›å»ºä¸€ä¸ªç«‹å³ resolve çš„ Promise å®ä¾‹</span>\n<span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token comment">// è°ƒåº¦å™¨çš„ä¸»è¦å‡½æ•°ï¼Œç”¨æ¥å°†ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°ç¼“å†²é˜Ÿåˆ—ä¸­ï¼Œå¹¶å¼€å§‹åˆ·æ–°é˜Ÿåˆ—</span>\n<span class="token keyword">function</span> <span class="token function">queueJob</span><span class="token punctuation">(</span><span class="token parameter">job</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// å°† job æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ— queue ä¸­</span>\n    queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>job<span class="token punctuation">)</span>\n    <span class="token comment">// å¦‚æœè¿˜æ²¡æœ‰å¼€å§‹åˆ·æ–°é˜Ÿåˆ—ï¼Œåˆ™åˆ·æ–°ä¹‹</span>\n    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>isFlushing<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// å°†è¯¥æ ‡å¿—è®¾ç½®ä¸º true ä»¥é¿å…é‡å¤åˆ·æ–°</span>\n       isFlushing <span class="token operator">=</span> <span class="token boolean">true</span>\n        <span class="token comment">// åœ¨è¯¥ä»»åŠ¡é˜Ÿåˆ—ä¸­åˆ·æ–°ä»»åŠ¡</span>\n        p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n            <span class="token keyword">try</span> <span class="token punctuation">{</span>\n                <span class="token comment">// æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡</span>\n                queue<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">job</span> <span class="token operator">=&gt;</span> <span class="token function">job</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>\n                <span class="token comment">// é‡ç½®ä»»åŠ¡</span>\n                isFlushing <span class="token operator">=</span> <span class="token boolean">false</span>\n                queue<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>ä¸Šé¢ä¸ºè°ƒåº¦å™¨çš„æœ€å°å®ç°ï¼Œæœ¬è´¨ä¸Šåˆ©ç”¨äº†<strong>å¾®ä»»åŠ¡çš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶</strong>ï¼Œå®ç°å¯¹å‰¯ä½œç”¨å‡½æ•°çš„ç¼“å†²ã€‚æœ‰äº†è°ƒåº¦å™¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºæ¸²æŸ“å‰¯ä½œç”¨æ—¶ä½¿ç”¨å®ƒï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n\n    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n    <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>\n        <span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> state<span class="token punctuation">)</span>\n        <span class="token function">patch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n        <span class="token comment">// æŒ‡å®šè¯¥å‰¯ä½œç”¨å‡½æ•°çš„è°ƒåº¦å™¨</span>\n        scheduler<span class="token operator">:</span> queueJob\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>âœ… è¿™æ ·ï¼Œå½“å“åº”å¼æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šè¢« queueJob å‡½æ•°è°ƒåº¦ï¼Œæœ€ååœ¨ä¸€ä¸ªå¾®ä»»åŠ¡ä¸­æ‰§è¡Œã€‚</p><p>ç›®å‰ï¼Œpatch çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯ nullï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯å…¨æ–°çš„æŒ‚è½½ï¼Œè€Œä¸ä¼šæ‰“è¡¥ä¸ã€‚æˆ‘ä»¬éœ€è¦å¯¹æ­¤è¿›è¡Œå¤„ç†ï¼Œæ›´æ–°æ—¶å¯ä»¥è¿›è¡Œæ‰“è¡¥ä¸ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ç»„ä»¶å®ä¾‹ï¼Œç”¨å®ƒæ¥ç»´æŠ¤ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€ï¼Œè¿™æ ·æ¸²æŸ“å™¨æ‰èƒ½å¤Ÿåœ¨æ­£ç¡®çš„æ—¶æœºæ‰§è¡Œåˆé€‚çš„æ“ä½œã€‚</p><h2 id="ç»„ä»¶çš„å®ä¾‹ä¸ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶çš„å®ä¾‹ä¸ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ç»„ä»¶çš„å®ä¾‹ä¸ç”Ÿå‘½å‘¨æœŸ</h2><blockquote><ul><li>ç»„ä»¶å®ä¾‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶è¿è¡Œè¿‡ç¨‹ä¸­çš„çŠ¶æ€ï¼ˆç»„ä»¶æ˜¯å¦æŒ‚è½½ã€ç»„ä»¶è‡ªèº«çš„å“åº”å¼æ•°æ®ï¼Œä»¥åŠç»„ä»¶æ‰€æ¸²æŸ“çš„å†…å®¹ <code>subTree</code> ç­‰ç­‰ï¼‰ã€‚</li><li>æ¸²æŸ“å‰¯ä½œç”¨å‡½æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹çš„çŠ¶æ€æ ‡è¯†æ¥å†³å®šæ˜¯å¦åº”è¯¥è¿›è¡Œæƒé™çš„æŒ‚è½½ï¼Œè¿˜æ˜¯åº”è¯¥æ‰“è¡¥ä¸ã€‚</li></ul></blockquote><h3 id="ç»„ä»¶å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶å®ä¾‹" aria-hidden="true">#</a> ç»„ä»¶å®ä¾‹</h3><p>ç»„ä»¶å®ä¾‹æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªçŠ¶æ€é›†åˆï¼ˆæˆ–ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œå®ƒç»´æŠ¤ç€ç»„ä»¶è¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä¾‹å¦‚æ³¨å†Œåˆ°ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€ç»„ä»¶æ¸²æŸ“çš„å­æ ‘ï¼ˆsubTreeï¼‰ã€ç»„ä»¶æ˜¯å¦å·²ç»æŒ‚è½½ã€ç»„ä»¶è‡ªèº«çš„çŠ¶æ€ï¼ˆdataï¼‰ç­‰ç­‰ã€‚ä¸ºäº†è§£å†³ç›®å‰ç»„ä»¶æ›´æ–°çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ç»„ä»¶å®ä¾‹çš„æ¦‚å¿µï¼Œä»¥åŠä¸ä¹‹ç›¸å…³çš„çŠ¶æ€ä¿¡æ¯ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token keyword">let</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n\n    <span class="token keyword">const</span> state <span class="token operator">=</span> data <span class="token operator">?</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token comment">// å®šä¹‰ç»„ä»¶å®ä¾‹ï¼Œä¸€ä¸ªåŒ…å«ç€ç»„ä»¶çŠ¶æ€ä¿¡æ¯çš„å¯¹è±¡</span>\n    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token punctuation">{</span>\n        state<span class="token punctuation">,</span>  <span class="token comment">// ç»„ä»¶è‡ªèº«çŠ¶æ€æ•°æ®ï¼Œå³ data</span>\n        isMounted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// ç»„ä»¶æ˜¯å¦å·²ç»æŒ‚è½½</span>\n        subTree<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>  <span class="token comment">// ç»„ä»¶æ‰€æ¸²æŸ“çš„å†…å®¹ï¼Œå³å­æ ‘ï¼ˆsubTreeï¼‰</span>\n    <span class="token punctuation">}</span>\n    <span class="token comment">// å°†ç»„ä»¶å®ä¾‹è®¾ç½®åˆ° vnode ä¸Šï¼Œç”¨äºåç»­æ›´æ–°</span>\n    vnode<span class="token punctuation">.</span>component <span class="token operator">=</span> instance\n\n    <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token comment">// è°ƒç”¨ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ï¼Œè·å¾—è¦æ¸²æŸ“çš„å†…å®¹</span>\n        <span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> state<span class="token punctuation">)</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">.</span>isMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// åˆæ¬¡æŒ‚è½½</span>\n            <span class="token function">patch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span> \n            instance<span class="token punctuation">.</span>isMounted <span class="token operator">=</span> <span class="token boolean">true</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// æ›´æ–° =&gt; æ‰“è¡¥ä¸</span>\n            <span class="token function">patch</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>subTree<span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        <span class="token comment">// æ›´æ–°ç»„ä»¶å®ä¾‹çš„å­æ ‘ï¼Œæ–¹ä¾¿åç»­æ‰“è¡¥ä¸çš„æ¯”è¾ƒ</span>\n        instance<span class="token punctuation">.</span>subTree <span class="token operator">=</span> subTree\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n        scheduler<span class="token operator">:</span> queueJob\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><details class="custom-container details"><summary>ç»„ä»¶å®ä¾‹å¯¹è±¡</summary><ul><li>stateï¼šç»„ä»¶è‡ªèº«çš„çŠ¶æ€æ•°æ®ï¼Œå³ data</li><li>isMountedï¼šä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥è¡¨ç¤ºç»„ä»¶æ˜¯å¦å·²ç»è¢«æŒ‚è½½</li><li>subTreeï¼šå­˜å‚¨ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°æ‰€è¿”å›çš„è™šæ‹Ÿ DOMï¼Œå³ç»„ä»¶çš„å­æ ‘ï¼ˆsubTreeï¼‰</li></ul><p>âœ… è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦ï¼Œä»»æ„å¾—åœ¨ç»„ä»¶å®ä¾‹ instance ä¸Šæ·»åŠ éœ€è¦çš„å±æ€§ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åº”è¯¥å°½å¯èƒ½ä¿æŒç»„ä»¶å®ä¾‹è½»é‡ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨</p></details><h3 id="å£°æ˜å‘¨æœŸå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å£°æ˜å‘¨æœŸå‡½æ•°" aria-hidden="true">#</a> å£°æ˜å‘¨æœŸå‡½æ•°</h3><p>ç›®å‰ç»„ä»¶å®ä¾‹çš„ isMounted å±æ€§å¯ä»¥ç”¨æ¥åŒºåˆ†ç»„ä»¶çš„æŒ‚è½½å’Œæ›´æ–°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆé€‚çš„æ—¶æœº<strong>è°ƒç”¨</strong>ç»„ä»¶çš„<strong>å£°æ˜å‘¨æœŸé’©å­</strong>ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token keyword">let</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> data<span class="token punctuation">,</span> beforeCreate<span class="token punctuation">,</span> created<span class="token punctuation">,</span> beforeMount<span class="token punctuation">,</span> mounted<span class="token punctuation">,</span> beforeUpdate<span class="token punctuation">,</span> updated <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n\n    beforeCreate <span class="token operator">&amp;&amp;</span> <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n    <span class="token keyword">const</span> state <span class="token operator">=</span> data <span class="token operator">?</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token punctuation">{</span>\n        state<span class="token punctuation">,</span>\n        isMounted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        subTree<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n\n    vnode<span class="token punctuation">.</span>component <span class="token operator">=</span> instance\n\n    created <span class="token operator">&amp;&amp;</span> <span class="token function">created</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>\n\n    <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n        <span class="token keyword">const</span> subTree <span class="token operator">=</span> <span class="token function">render</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> state<span class="token punctuation">)</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>instance<span class="token punctuation">.</span>isMounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            beforeMount <span class="token operator">&amp;&amp;</span> <span class="token function">beforeMount</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>\n            <span class="token function">patch</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n            instance<span class="token punctuation">.</span>isMounted <span class="token operator">=</span> <span class="token boolean">true</span>\n            mounted <span class="token operator">&amp;&amp;</span> <span class="token function">mounted</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n            beforeUpdate <span class="token operator">&amp;&amp;</span> <span class="token function">beforeUpdate</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>\n            <span class="token function">patch</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>subTree<span class="token punctuation">,</span> subTree<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor<span class="token punctuation">)</span>\n            updated <span class="token operator">&amp;&amp;</span> <span class="token function">updated</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>\n        <span class="token punctuation">}</span>\n        instance<span class="token punctuation">.</span>subTree <span class="token operator">=</span> subTree\n    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n        scheduler<span class="token operator">:</span> queueJob\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">Â </div><br><div class="highlight-line">Â </div><br><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">Â </div><br><br><br><br><div class="highlight-line">Â </div><br><br><div class="highlight-line">Â </div><br><div class="highlight-line">Â </div><br><div class="highlight-line">Â </div><br><br><br><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>âœ… åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä»ç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ä¸­å–å¾—æ³¨å†Œåˆ°ç»„ä»¶ä¸Šçš„å£°æ˜å‘¨æœŸå‡½æ•°ï¼Œç„¶ååœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨å®ƒä»¬ï¼Œè¿™å…¶å®å°±æ˜¯ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å®ç°åŸç†ã€‚</p><blockquote><p>å®é™…ä¸Šï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥å­˜åœ¨å¤šä¸ªåŒæ ·çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¾‹å¦‚ mixinsã€‚å› æ­¤æˆ‘ä»¬é€šå¸¸éœ€è¦å°†ç»„ä»¶çš„å£°æ˜å‘¨æœŸé’©å­åºåˆ—åŒ–ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œä½†æ ¸å¿ƒåŸç†ä¸å˜ã€‚</p></blockquote><h2 id="props-ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#props-ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°" aria-hidden="true">#</a> props ä¸ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°</h2><blockquote><ul><li>å‰¯ä½œç”¨å­æ›´æ–°æ‰€å¼•èµ·çš„å­ç»„ä»¶æ›´æ–°å«åšå­ç»„ä»¶çš„è¢«åŠ¨æ›´æ–°ã€‚</li><li>æ¸²æŸ“ä¸Šä¸‹æ–‡<code>renderContext</code> å®é™…ä¸Šæ˜¯ç»„ä»¶å®ä¾‹çš„ä»£ç†å¯¹è±¡ã€‚åœ¨æ¸²æŸ“å‡½æ•°å†…è®¿é—®ç»„ä»¶æ‰€æš´éœ²çš„æ•°æ®éƒ½æ˜¯é€šè¿‡è¯¥ä»£ç†å¯¹è±¡å®ç°çš„ã€‚</li></ul></blockquote><h3 id="props-ä¸-attrs" tabindex="-1"><a class="header-anchor" href="#props-ä¸-attrs" aria-hidden="true">#</a> props ä¸ attrs</h3><p>åœ¨è™šæ‹Ÿ DOM å±‚é¢ï¼Œç»„ä»¶çš„ props ä¸æ™®é€š HTML æ ‡ç­¾çš„å±æ€§å·®åˆ«ä¸å¤§ã€‚å‡è®¾æˆ‘ä»¬æœ‰æ¨¡æ¿å¦‚ä¸‹ï¼š</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MyComponent</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>A Big Title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:other</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>val<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>è¿™æ®µæ¨¡æ¿å¯¹åº”çš„è™šæ‹Ÿ DOM æ˜¯ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token punctuation">{</span>\n\ttype<span class="token operator">:</span> MyComponent<span class="token punctuation">,</span>\n    props<span class="token operator">:</span> <span class="token punctuation">{</span>\n        title<span class="token operator">:</span> <span class="token string">&#39;A Big Title&#39;</span><span class="token punctuation">,</span>\n        other<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>val\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡æ¿ä¸è™šæ‹Ÿ DOM å‡ ä¹æ˜¯â€œåŒæ„â€çš„ã€‚åŒæ—¶ï¼Œåœ¨ç¼–å†™ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾ç¤ºåœ°æŒ‡å®šç»„ä»¶è¦æ¥æ”¶å“ªäº›æ•°æ®ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{</span>\n    name<span class="token operator">:</span> <span class="token string">&#39;MyComponent&#39;</span><span class="token punctuation">,</span>\n    <span class="token comment">// ç»„ä»¶æ¥æ”¶ä¸€ä¸ª String ç±»å‹çš„ title å±æ€§</span>\n    props<span class="token operator">:</span> <span class="token punctuation">{</span>\n        title<span class="token operator">:</span> String\n    <span class="token punctuation">}</span>\n    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">return</span> <span class="token punctuation">{</span>\n            type<span class="token operator">:</span> <span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span>\n            children<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo çš„å€¼æ˜¯ï¼š </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">æ‰€ä»¥å¯¹äºä¸€ä¸ªç»„ä»¶æ¥è¯´ï¼Œæœ‰ä¸¤éƒ¨åˆ†å…³äº props çš„å†…å®¹æˆ‘ä»¬éœ€è¦å…³å¿ƒï¼š</p><ul><li>ä¸ºç»„ä»¶ä¼ é€’çš„ props æ•°æ®ï¼Œå³ç»„ä»¶çš„ vnode.props å¯¹è±¡ã€‚ï¼ˆç»„ä»¶éƒ½æ¥æ”¶åˆ°äº†ä»€ä¹ˆï¼‰</li><li>ç»„ä»¶é€‰é¡¹å¯¹è±¡ä¸­å®šä¹‰çš„ props é€‰é¡¹ï¼Œå³ MyComponent.props å¯¹è±¡ã€‚ï¼ˆç»„ä»¶è¦ä»€ä¹ˆï¼‰</li></ul></div><p>æˆ‘ä»¬éœ€è¦ç»“åˆè¿™ä¸¤ä¸ªé€‰é¡¹è§£æå‡ºç»„ä»¶åœ¨æ¸²æŸ“æ—¶éœ€è¦ç”¨åˆ°çš„ props æ•°æ®ï¼š</p>',27),u=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token doc-comment comment"},[(0,t.Uk)("/**\n   * "),(0,t._)("span",{class:"token keyword"},"@description"),(0,t.Uk)(": \n   * "),(0,t._)("span",{class:"token keyword"},"@param"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("Object"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"optionsï¼šç»„ä»¶propså£°æ˜è¦æ¥æ”¶çš„å±æ€§"),(0,t.Uk)("\n   * "),(0,t._)("span",{class:"token keyword"},"@param"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("Object"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)(),(0,t._)("span",{class:"token parameter"},"propsDataï¼švnodeèŠ‚ç‚¹æ¥æ”¶åˆ°çš„å…¨éƒ¨å±æ€§"),(0,t.Uk)("\n   * "),(0,t._)("span",{class:"token keyword"},"@return"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},[(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("Props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" Attrs"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t.Uk)("\n   */")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"resolveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("options"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" propsData")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" attrs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// å¦‚æœå±æ€§è¢«ç»„ä»¶å£°æ˜åœ¨ props å¯¹è±¡ä¸­ï¼Œåˆ™ä¸º props"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("options "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" options"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token comment"},"// å¦åˆ™å°±æ˜¯ attrs"),(0,t.Uk)("\n            attrs"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" attrs "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br")])],-1),k=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("vnode"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" componentOptions "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type\n    "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" render"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" data"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" propsOption "),(0,t._)("span",{class:"token comment"},"/* å…¶å®ƒçœç•¥ */"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" componentOptions\n\n    beforeCreate "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeCreate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" state "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" data "),(0,t._)("span",{class:"token operator"},"?"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"reactive"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"data"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n                                  \n    "),(0,t._)("span",{class:"token comment"},"// è°ƒç”¨ resolveProps å‡½æ•°è§£æå‡ºæœ€ç»ˆçš„ props æ•°æ®ä¸ attrs æ•°æ®"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" attrs"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"resolveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propsOption"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" instance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// å°†è§£æå‡ºçš„ props æ•°æ®ä¿åŒ…è£…ä¸º shallowReactive å¹¶å®šä¹‰åˆ°ç»„ä»¶å®ä¾‹ä¸Š"),(0,t.Uk)("\n        props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"shallowReactive"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        isMounted"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        subTree"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance\n\n    created "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"created"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token function"},"effect"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" subTree "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isMounted"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            beforeMount "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeMount"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"patch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isMounted "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n            mounted "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            beforeUpdate "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeUpdate"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"patch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            updated "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updated"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("subTree "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" subTree\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        scheduler"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" queueJob\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br")])],-1),r=(0,t.uE)('<blockquote><p>åœ¨ Vue.js3 ä¸­ï¼Œæ²¡æœ‰å®šä¹‰åœ¨ MyComponent.props é€‰é¡¹ä¸­çš„ props æ•°æ®å°†å­˜å‚¨åˆ° attrs å¯¹è±¡ä¸­ã€‚</p><p>ä¸Šè¿°å®ç°æ²¡æœ‰åŒ…å«é»˜è®¤å€¼ã€ç±»å‹æ ¡éªŒç­‰å†…å®¹çš„å¤„ç†ã€‚å®é™…ä¸Šï¼Œè¿™äº›å†…å®¹ä¹Ÿéƒ½æ˜¯å›´ç»• MyComponent.props å’Œ vnode.props è¿™ä¸¤ä¸ªå¯¹è±¡å±•å¼€çš„ã€‚</p></blockquote><h3 id="è¢«åŠ¨æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#è¢«åŠ¨æ›´æ–°" aria-hidden="true">#</a> è¢«åŠ¨æ›´æ–°</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child-component</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>å‡è®¾çˆ¶ç»„ä»¶å†…ä½¿ç”¨äº†å­ç»„ä»¶ï¼Œå¹¶ä¸”ä¼ é€’äº†ä¸€ä¸ªå“åº”å¼æ•°æ® titleã€‚å½“ title å‘ç”Ÿå˜åŒ–æ—¶ï¼Œçˆ¶ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ä¼šé‡æ–°æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯<strong>è‡ªæ›´æ–°</strong>ã€‚åœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œæ¸²æŸ“å™¨å‘ç°çˆ¶ç»„ä»¶çš„ <code>subTree</code> åŒ…å«ç»„ä»¶ç±»å‹çš„è™šæ‹ŸèŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¼šè°ƒç”¨ <code>patchComponent</code> å‡½æ•°å®Œæˆå­ç»„ä»¶çš„æ›´æ–°ã€‚</p><div class="custom-container tip"><p class="custom-container-title">è¢«åŠ¨æ›´æ–°: ç”±çˆ¶ç»„ä»¶è‡ªæ›´æ–°æ‰€å¼•èµ·çš„å­ç»„ä»¶æ›´æ–°</p><ul><li>æ£€æµ‹å­ç»„ä»¶æ˜¯å¦çœŸçš„éœ€è¦æ›´æ–°ï¼Œå› ä¸ºå­ç»„ä»¶çš„ props å¯èƒ½æ˜¯ä¸å˜çš„ï¼›</li><li>å¦‚æœéœ€è¦æ›´æ–°ï¼Œåˆ™æ›´æ–°å­ç»„ä»¶çš„ propsã€slots ç­‰å†…å®¹ã€‚</li></ul></div>',5),i=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"patchComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("n1"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" n2"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// è·å–ç»„ä»¶å®ä¾‹ï¼Œå³ n1 æ—§ vnode çš„componentï¼ŒåŒæ—¶è®©æ–°çš„ç»„ä»¶è™šæ‹ŸèŠ‚ç‚¹ n2.component ä¹ŸæŒ‡å‘ç»„ä»¶å®ä¾‹"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" instance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("n2"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" n1"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// è·å–å½“å‰çš„ props æ•°æ®"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" props "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance\n    "),(0,t._)("span",{class:"token comment"},"// æ£€æµ‹ä¼ é€’ç»™å­ç»„ä»¶çš„ props æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæœ‰å˜åŒ–æ‰æ›´æ–°"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"hasPropsChanged"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("n1"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" n2"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// è°ƒç”¨ resolveProps é‡æ–°è·å– props æ•°æ®"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)(" nextProps"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" nextAttrs "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"resolveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("n2"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" n2"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// props æ›´æ–°ä¸åˆ é™¤"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" nextProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" nextProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" nextProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"delete"),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br")])],-1),_=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"hasPropsChanged"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("prevProps"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" nextProps")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" nextKeys "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("nextKeys"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length "),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" Object"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"keys"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("prevProps"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i "),(0,t._)("span",{class:"token operator"},"<"),(0,t.Uk)(" nextKeys"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("length"),(0,t._)("span",{class:"token punctuation"},";"),(0,t.Uk)(" i"),(0,t._)("span",{class:"token operator"},"++"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" nextKeys"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("i"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" nextProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"!=="),(0,t.Uk)(" prevProps"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),b=(0,t.uE)('<ul><li>éœ€è¦æŠŠç»„ä»¶å®ä¾‹æ·»åŠ åˆ°æ–°çš„ç»„ä»¶ vnode å¯¹è±¡ä¸Šï¼Œå³ <code>n2.component = n1.component</code>ï¼Œå¦åˆ™ä¸‹æ¬¡æ›´æ–°æ—¶å°†æ— æ³•å–å¾—ç»„ä»¶å®ä¾‹ï¼›</li><li><code>instance.props</code> å¯¹è±¡æœ¬èº«æ˜¯æµ…å“åº”çš„ï¼ˆshallowReactiveï¼‰ã€‚å› æ­¤ï¼Œåœ¨æ›´æ–°ç»„ä»¶ props æ—¶ï¼Œåªéœ€è¦è®¾ç½® <code>instance.props</code> å¯¹è±¡ä¸‹çš„å±æ€§å€¼å³å¯è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</li></ul><h3 id="æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡" tabindex="-1"><a class="header-anchor" href="#æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡" aria-hidden="true">#</a> æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡</h3><p>ç”±äº props æ•°æ®ä¸ç»„ä»¶è‡ªèº«çš„çŠ¶æ€æ•°æ®éƒ½éœ€è¦æš´éœ²åˆ°æ¸²æŸ“å‡½æ•°ä¸­ï¼Œå¹¶ä½¿å¾—æ¸²æŸ“å‡½æ•°èƒ½å¤Ÿé€šè¿‡ this è®¿é—®å®ƒä»¬ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token comment">// ...</span>\n    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token punctuation">{</span>\n        state<span class="token punctuation">,</span>\n        props<span class="token operator">:</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        isMounted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        subTree<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n\n    vnode<span class="token punctuation">.</span>component <span class="token operator">=</span> instance\n    <span class="token comment">// åˆ›å»ºæ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæœ¬è´¨æ˜¯ç»„ä»¶å®ä¾‹çš„ä»£ç†</span>\n    <span class="token keyword">const</span> renderContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n        <span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> k<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">const</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> props<span class="token punctuation">,</span> slots <span class="token punctuation">}</span> <span class="token operator">=</span> t\n\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">===</span> <span class="token string">&#39;$slots&#39;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> slots\n\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">return</span> state<span class="token punctuation">[</span>k<span class="token punctuation">]</span>\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">return</span> props<span class="token punctuation">[</span>k<span class="token punctuation">]</span>\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>setupState <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> setupState<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">return</span> setupState<span class="token punctuation">[</span>k<span class="token punctuation">]</span>\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸å­˜åœ¨&#39;</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token function">set</span> <span class="token punctuation">(</span>t<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">const</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> t\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                state<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                props<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>setupState <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> setupState<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                setupState<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸å­˜åœ¨&#39;</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n    <span class="token comment">// å£°æ˜å‘¨æœŸå‡½æ•°è°ƒç”¨æ—¶è¦ç»‘å®šæ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡</span>\n    created <span class="token operator">&amp;&amp;</span> <span class="token function">created</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>renderContext<span class="token punctuation">)</span>\n    <span class="token comment">// ...</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>âœ… é€šè¿‡åˆ›å»ºä¸€ä¸ªç»„ä»¶å®ä¾‹çš„<strong>ä»£ç†å¯¹è±¡</strong>ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚æ¯å½“æ¸²æŸ“å‡½æ•°æˆ–è€…å£°æ˜å‘¨æœŸå‡½æ•°é’©å­ä¸­é€šè¿‡ this æ¥è®¿é—®æ•°æ®æ—¶ï¼Œéƒ½ä¼šä¼˜å…ˆä»ç»„ä»¶è‡ªèº«çŠ¶æ€ä¸­è¯»å–ï¼Œå¦‚æœç»„ä»¶æœ¬èº«æ²¡æœ‰å¯¹åº”çš„æ•°æ®ï¼Œåˆ™å†ä» props æ•°æ®ä¸­è¯»å–ã€‚ç„¶åæˆ‘ä»¬å°†è¿™ä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ä½œä¸ºæ¸²æŸ“å‡½æ•°å’Œå£°æ˜å‘¨æœŸé’©å­å‡½æ•°çš„ this å³å¯ã€‚</p><blockquote><p>é™¤äº†ç»„ä»¶è‡ªèº«çš„æ•°æ®å’Œ props æ•°æ®ä¹‹å¤–ï¼Œå®Œæ•´çš„ç»„ä»¶è¿˜åŒ…å« methodsã€computed ç­‰ç»„ä»¶é€‰é¡¹ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œè¿™äº›å†…å®¹éƒ½åº”è¯¥åœ¨æ¸²æŸ“ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­å¤„ç†ã€‚</p></blockquote><h2 id="setup-å‡½æ•°çš„ä½œç”¨ä¸å®ç°" tabindex="-1"><a class="header-anchor" href="#setup-å‡½æ•°çš„ä½œç”¨ä¸å®ç°" aria-hidden="true">#</a> setup å‡½æ•°çš„ä½œç”¨ä¸å®ç°</h2><h3 id="setup-å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#setup-å‡½æ•°" aria-hidden="true">#</a> setup å‡½æ•°</h3><div class="custom-container tip"><p class="custom-container-title">setup å‡½æ•°æ˜¯ Vue.js 3 æ–°å¢çš„ç»„ä»¶é€‰é¡¹ï¼Œå®ƒä¸»è¦æ˜¯ç”¨äºé…åˆç»„ä»¶å¼ APIï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªåœ°æ–¹ï¼Œç”¨äºå»ºç«‹ç»„åˆé€»è¾‘ã€åˆ›å»ºå“åº”å¼æ•°æ®ã€åˆ›å»ºé€šç”¨å‡½æ•°ã€æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­ç­‰èƒ½åŠ›ã€‚</p><ol><li>åœ¨ç»„ä»¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œsetup å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå®ƒçš„<strong>è¿”å›å€¼</strong>å¯ä»¥æ˜¯ä¸€ä¸ª render å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼›</li><li>setup å‡½æ¥æ¥æ”¶ä¸¤ä¸ª<strong>å‚æ•°</strong>ï¼Œåˆ†åˆ«æ˜¯ props æ•°æ®å¯¹è±¡å’Œä¸€ä¸ª setupContext å¯¹è±¡ã€‚</li></ol></div><details class="custom-container details"><summary>setupContext</summary><ul><li>slotsï¼šç»„ä»¶æ¥æ”¶åˆ°çš„æ’æ§½ã€‚</li><li>emitï¼šä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥å‘å°„è‡ªå®šä¹‰äº‹ä»¶ã€‚</li><li>attrsï¼šå½“ä¸ºç»„ä»¶ä¼ é€’ props æ—¶ï¼Œé‚£äº›æ²¡æœ‰æ˜¾ç¤ºåœ°å£°æ˜ä¸º props å±æ€§ä¼šå­˜å‚¨åˆ° attrs ä¸­ã€‚</li><li>exposeï¼šä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ˜¾ç¤ºå®šä¹‰ç»„ä»¶å¯¹å¤–æš´éœ²çš„æ•°æ®ã€‚</li></ul></details>',10),m=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" comp "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// setup å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†ä½œä¸ºç»„ä»¶çš„æ¸²æŸ“å‡½æ•°"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setup"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'div'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'hello'"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br")])],-1),U=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" comp "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// setup å‡½æ•°å¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æ•°æ®ä¼šæš´éœ²åˆ°æ¸²æŸ“å‡½æ•°ä¸­"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setup"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" count "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"ref"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" count "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'div'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"count is: "),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("count"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),d=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" comp "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    prosp"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        foo"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" String\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setup"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" setupContext")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        props"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("foo  "),(0,t._)("span",{class:"token comment"},"// è®¿é—®ä¼ å…¥çš„ props æ•°æ®"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" slots"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" emit"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" attrs"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" expose "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" setupContext\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br")])],-1),y=(0,t.uE)('<h3 id="setup-å®ç°" tabindex="-1"><a class="header-anchor" href="#setup-å®ç°" aria-hidden="true">#</a> setup å®ç°</h3><p>âœ… é€šè¿‡æ£€æµ‹ setup å‡½æ•°çš„è¿”å›å€¼æ¥åˆ¤æ–­å¦‚ä½•å¤„ç†å®ƒã€‚å¦‚æœè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆç»„ä»¶çš„ render é€‰é¡¹å°†è¢«å¿½ç•¥ï¼›å¦‚æœè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡å°†ä½œä¸ºç»„ä»¶çš„çŠ¶æ€æ•°æ® <code>setupState</code>ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">mountComponent</span><span class="token punctuation">(</span><span class="token parameter">vnode<span class="token punctuation">,</span> container<span class="token punctuation">,</span> anchor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> componentOptions <span class="token operator">=</span> vnode<span class="token punctuation">.</span>type\n    <span class="token keyword">let</span> <span class="token punctuation">{</span> render<span class="token punctuation">,</span> data<span class="token punctuation">,</span> setup <span class="token punctuation">}</span> <span class="token operator">=</span> componentOptions\n\n    beforeCreate <span class="token operator">&amp;&amp;</span> <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n    <span class="token keyword">const</span> state <span class="token operator">=</span> data <span class="token operator">?</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span>\n    <span class="token keyword">const</span> <span class="token punctuation">[</span>props<span class="token punctuation">,</span> attrs<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">resolveProps</span><span class="token punctuation">(</span>propsOption<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>props<span class="token punctuation">)</span>\n\n    <span class="token keyword">const</span> slots <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token punctuation">{</span>\n        state<span class="token punctuation">,</span>\n        props<span class="token operator">:</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">,</span>\n        isMounted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n        subTree<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">const</span> setupContext <span class="token operator">=</span> <span class="token punctuation">{</span> attrs <span class="token punctuation">}</span>  <span class="token comment">// emit,slots,expose...</span>\n    <span class="token comment">// è°ƒç”¨ setup å‡½æ•°ï¼Œå°†åªè¯»ç‰ˆæœ¬çš„ props ä¼ ç»™ setup ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</span>\n    <span class="token comment">// setupContext ä¸ºç¬¬äºŒä¸ªå‚æ•°</span>\n    <span class="token keyword">const</span> setupResult <span class="token operator">=</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token function">shallowReadonly</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>props<span class="token punctuation">)</span><span class="token punctuation">,</span> setupContext<span class="token punctuation">)</span>\n    <span class="token keyword">let</span> setupState <span class="token operator">=</span> <span class="token keyword">null</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> setupResult <span class="token operator">===</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token keyword">if</span> <span class="token punctuation">(</span>render<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;setup å‡½æ•°è¿”å›æ¸²æŸ“å‡½æ•°ï¼Œrender é€‰é¡¹å°†è¢«å¿½ç•¥&#39;</span><span class="token punctuation">)</span>\n        render <span class="token operator">=</span> setupResult\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n        <span class="token comment">// å¦‚æœ setup è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½œä¸ºæ•°æ®çŠ¶æ€èµ‹å€¼ç»™ setupState</span>\n        setupState <span class="token operator">=</span> setupContext\n    <span class="token punctuation">}</span>\n\n    vnode<span class="token punctuation">.</span>component <span class="token operator">=</span> instance\n\n    <span class="token keyword">const</span> renderContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> <span class="token punctuation">{</span>\n        <span class="token function">get</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> k<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">const</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> t\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">return</span> state<span class="token punctuation">[</span>k<span class="token punctuation">]</span>\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token keyword">return</span> props<span class="token punctuation">[</span>k<span class="token punctuation">]</span>\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>setupState <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> setupState<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                <span class="token comment">// æ¸²æŸ“ä¸Šä¸‹æ–‡éœ€è¦å¢åŠ å¯¹ setupState çš„æ”¯æŒ</span>\n                <span class="token keyword">return</span> setupState<span class="token punctuation">[</span>k<span class="token punctuation">]</span>\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸å­˜åœ¨&#39;</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token function">set</span> <span class="token punctuation">(</span>t<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            <span class="token keyword">const</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> t\n            <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                state<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token keyword">in</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                props<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>setupState <span class="token operator">&amp;&amp;</span> k <span class="token keyword">in</span> setupState<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n                setupState<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v\n            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n                console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸å­˜åœ¨&#39;</span><span class="token punctuation">)</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token comment">// ... created</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h2 id="ç»„ä»¶äº‹ä»¶ä¸-emit-å®ç°" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶äº‹ä»¶ä¸-emit-å®ç°" aria-hidden="true">#</a> ç»„ä»¶äº‹ä»¶ä¸ emit å®ç°</h2><ul><li>ç»„ä»¶å†…é€šè¿‡ emit æ–¹æ³•å‘å°„äº‹ä»¶ï¼Œç»„ä»¶å¯ä»¥ç›‘å¬ç”± emit å‡½æ•°å‘å°„çš„è‡ªå®šä¹‰äº‹ä»¶ï¼›</li><li>emit å®é™…ä¸Šå°±æ˜¯æ ¹æ®åç§° å» props å¯¹è±¡ä¸­å¯»æ‰¾å¯¹åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°å¹¶æ‰§è¡Œï¼›</li><li>åªéœ€è¦å®ç° emit å‡½æ•°å¹¶æ·»åŠ åˆ° setupContext å¯¹è±¡ä¸­ï¼›</li><li>æˆ‘ä»¬çº¦å®š on å¼€å¤´çš„ props å±æ€§è¦ä½œä¸ºäº‹ä»¶å¤„ç†ï¼Œæ‰€ä»¥è¿™äº›å±æ€§è¦éƒ½æ”¾åˆ° props å½“ä¸­ã€‚</li></ul>',5),f=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" MyComponen "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    name"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'MyComponent'"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setup"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" emit "),(0,t._)("span",{class:"token punctuation"},"}")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// å‘å°„ change äº‹ä»¶ï¼Œå¹¶ä¼ é€’å¿…è¦å‚æ•°"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"emit"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'change'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token number"},"2"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br")])],-1),g=(0,t._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,t._)("pre",{class:"language-html"},[(0,t._)("code",null,[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("MyComponen")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"@change"),(0,t._)("span",{class:"token attr-value"},[(0,t._)("span",{class:"token punctuation attr-equals"},"="),(0,t._)("span",{class:"token punctuation"},'"'),(0,t.Uk)("handler"),(0,t._)("span",{class:"token punctuation"},'"')]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"/>")]),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br")])],-1),v=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" CompVNode "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" MyComponent"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        onChange"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" handler\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br")])],-1),w=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"emit"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("event"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("payload")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventName "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"on"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("event"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toUpperCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"+"),(0,t.Uk)(" event"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" handler "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("handler"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"handler"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("payload"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'äº‹ä»¶ä¸å­˜åœ¨'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br")])],-1),h=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"resolveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("options"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" propsData")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" attrs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// ä»¥å­—ç¬¦ä¸² on å¼€å¤´çš„ props, æ— è®ºæ˜¯å¦æ˜¾ç¤ºåœ°å£°æ˜ä½¿ç”¨ï¼Œéƒ½æ·»åŠ åˆ° props è€Œä¸æ˜¯ attrs"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("options "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" options"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(" key"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"startsWith"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'on'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            attrs"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" attrs "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br")])],-1),j=(0,t.uE)('<blockquote><p>Vue.js 3 éœ€è¦åœ¨ emits å±æ€§ä¸­å£°æ˜ç»„ä»¶ä¼š emit çš„äº‹ä»¶ï¼Œé‚£ä¹ˆ <code>resolveProps</code> å¯ä»¥é€šè¿‡è¿™ä¸ª emits æ¥åˆ¤æ–­å±æ€§æ˜¯ä¸æ˜¯éœ€è¦æ”¾åˆ° props é‡Œ</p></blockquote><h2 id="æ’æ§½çš„å·¥ä½œåŸç†åŠå®ç°" tabindex="-1"><a class="header-anchor" href="#æ’æ§½çš„å·¥ä½œåŸç†åŠå®ç°" aria-hidden="true">#</a> æ’æ§½çš„å·¥ä½œåŸç†åŠå®ç°</h2><blockquote><ul><li>ç»„ä»¶çš„æ’æ§½å€Ÿé‰´äº† Web Component ä¸­ <code>&lt;slot&gt;</code> æ ‡ç­¾çš„æ¦‚å¿µã€‚æ’æ§½å†…å®¹ä¼šè¢«ç¼–è¯‘æˆæ’æ§½å‡½æ•°ï¼Œæ’æ§½å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å‘æ’æ§½ä¸­å¡«å……çš„å†…å®¹ã€‚</li><li><code>&lt;slot&gt;</code> æ ‡ç­¾åˆ™ä¼šè¢«ç¼–è¯‘ä¸ºæ’æ§½å‡½æ•°çš„è°ƒç”¨ï¼Œé€šè¿‡æ‰§è¡Œå¯¹åº”çš„æ’æ§½å‡½æ•°ï¼Œå¾—åˆ°å¤–éƒ¨å‘æ§½ä½å¡«å……çš„å†…å®¹ï¼ˆå³è™šæ‹Ÿ DOMï¼‰ï¼Œæœ€åå°†è¯¥å†…å®¹æ¸²æŸ“åˆ°æ§½ä½ä¸­ã€‚</li></ul></blockquote>',3),x=(0,t._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,t._)("pre",{class:"language-html"},[(0,t._)("code",null,[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("header")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("slot")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"name"),(0,t._)("span",{class:"token attr-value"},[(0,t._)("span",{class:"token punctuation attr-equals"},"="),(0,t._)("span",{class:"token punctuation"},'"'),(0,t.Uk)("header"),(0,t._)("span",{class:"token punctuation"},'"')]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"/>")]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("header")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("div")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("slot")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"name"),(0,t._)("span",{class:"token attr-value"},[(0,t._)("span",{class:"token punctuation attr-equals"},"="),(0,t._)("span",{class:"token punctuation"},'"'),(0,t.Uk)("body"),(0,t._)("span",{class:"token punctuation"},'"')]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"/>")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("div")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("footer")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("slot")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"name"),(0,t._)("span",{class:"token attr-value"},[(0,t._)("span",{class:"token punctuation attr-equals"},"="),(0,t._)("span",{class:"token punctuation"},'"'),(0,t.Uk)("footer"),(0,t._)("span",{class:"token punctuation"},'"')]),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"/>")]),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("footer")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),C=(0,t._)("p",null,"é¡¾åæ€ä¹‰ï¼Œç»„ä»¶çš„æ’æ§½æŒ‡ç»„ä»¶ä¼šé¢„ç•™ä¸€ä¸ªæ§½ä½ï¼Œè¯¥æ§½ä½å…·ä½“è¦æ¸²æŸ“çš„å†…å®¹ç”±ç”¨æˆ·æ’å…¥",-1),M=(0,t._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,t._)("pre",{class:"language-html"},[(0,t._)("code",null,[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("MyComponent")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("template")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"#header"),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n\t\t"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("h1")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("æˆ‘æ˜¯æ ‡é¢˜"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("h1")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("template")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"#body"),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n\t\t"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("section")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("æˆ‘æ˜¯å†…å®¹"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("section")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("template")]),(0,t.Uk)(),(0,t._)("span",{class:"token attr-name"},"#footer"),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n\t\t"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"<"),(0,t.Uk)("p")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("æˆ‘æ˜¯è„šæ³¨"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("p")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("template")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n"),(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token tag"},[(0,t._)("span",{class:"token punctuation"},"</"),(0,t.Uk)("MyComponent")]),(0,t._)("span",{class:"token punctuation"},">")]),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br")])],-1),T=(0,t._)("p",null,[(0,t.Uk)("å½“çˆ¶ç»„ä»¶ä½¿ç”¨"),(0,t._)("code",null,"<MyComponen>"),(0,t.Uk)(" ç»„ä»¶æ—¶ï¼Œå¯ä»¥æ ¹æ®æ’æ§½çš„åå­—æ¥æ’å…¥è‡ªå®šä¹‰çš„å†…å®¹")],-1),q=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// çˆ¶ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" MyComponent"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// ç»„ä»¶çš„ children ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡"),(0,t.Uk)("\n        children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"header"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n                "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'h1'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'æˆ‘æ˜¯æ ‡é¢˜'"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"body"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n                "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'section'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'æˆ‘æ˜¯å†…å®¹'"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"footer"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n                "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'p'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'æˆ‘æ˜¯çŒªè„š'"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br")])],-1),O=(0,t._)("p",null,[(0,t.Uk)("âœ… ç»„ä»¶æ¨¡æ¿ä¸­çš„æ’æ§½å†…å®¹ä¼šè¢«ç¼–è¯‘ä¸º"),(0,t._)("strong",null,"æ’æ§½å‡½æ•°"),(0,t.Uk)("ï¼Œè€Œæ’æ§½å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å…·ä½“çš„æ’æ§½å†…å®¹ã€‚")],-1),W=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"//  MyComponent ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'header'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("$slots"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"header"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'body'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("$slots"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"body"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            type"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'footer'"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n            children"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token keyword"},"this"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("$slots"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"footer"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br")])],-1),P=(0,t._)("p",null,"âœ… æ¸²æŸ“æ’æ§½çš„è¿‡ç¨‹ï¼Œå°±æ˜¯è°ƒç”¨æ’æ§½å‡½æ•°å¹¶æ¸²æŸ“æœ‰å…¶è¿”å›çš„å†…å®¹çš„è¿‡ç¨‹",-1),S=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("vnode"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// ç›´æ¥ä½¿ç”¨ç¼–è¯‘å¥½çš„ vnode.children å¯¹è±¡ä½œä¸º slots å¯¹è±¡å³å¯"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    \n    "),(0,t._)("span",{class:"token comment"},"// å°† slots å¯¹è±¡æ·»åŠ åˆ° setupContext å¯¹è±¡ä¸­"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" setupContext "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)("  "),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" attrs"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" emit"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br")])],-1),D=(0,t._)("p",null,"åœ¨è¿è¡Œæ—¶çš„å®ç°ä¸Šï¼Œæ’æ§½åˆ™ä¾èµ–äº setupContext ä¸­çš„ slots å¯¹è±¡",-1),I=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("vnode"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" instance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"shallowReactive"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        isMounted"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        subTree"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        slots"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("  "),(0,t._)("span",{class:"token comment"},"// å°†æ’æ§½æ·»åŠ åˆ°ç»„ä»¶å®ä¾‹ä¸Š"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" renderContext "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Proxy"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"get"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("t"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" k"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" r"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" t\n            "),(0,t._)("span",{class:"token comment"},"// å½“ k çš„å€¼ä¸º $slots æ—¶ï¼Œç›´æ¥è¿”å›ç»„ä»¶å®ä¾‹ä¸Šçš„ slots"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("k "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'$slots'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" slots\n            \n            "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token function"},"set"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("t"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" k"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" v"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" r"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br")])],-1),R=(0,t._)("p",null,[(0,t.Uk)("æˆ‘ä»¬å¯¹ æ¸²æŸ“ä¸Šä¸‹æ–‡ "),(0,t._)("code",null,"renderContext"),(0,t.Uk)(" ä»£ç†å¯¹è±¡çš„ get æ‹¦æˆªå‡½æ•°åšäº†ç‰¹æ®Šå¤„ç†ï¼Œå½“è¯»å–çš„é”®æ˜¯ $slots æ—¶ï¼Œç›´æ¥è¿”å›ç»„ä»¶å®ä¾‹ä¸Šçš„ slots å¯¹è±¡ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥é€šè¿‡ this.$slots æ¥è®¿é—®æ’æ§½å†…å®¹äº†ã€‚")],-1),E=(0,t.uE)('<blockquote><p>ç»„ä»¶æ’æ§½å‡½æ•°çš„è°ƒç”¨æ˜¯ä¸€å®šçš„ï¼Œå¤–éƒ¨æ˜¯å¦ä¼ å…¥æ’æ§½å‡½æ•°æ˜¯ä¸ç¡®å®šçš„ã€‚</p></blockquote><h2 id="æ³¨å†Œç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#æ³¨å†Œç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> æ³¨å†Œç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨ Vue.js 3ä¸­ï¼Œä¸€éƒ¨åˆ†ç»„åˆå¼ API æ˜¯ç”¨æ¥æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼ˆonMountedã€onUpdatedç­‰ç­‰ï¼‰ã€‚å®ƒä»¬å¯ä»¥è¢«<strong>å¤šæ¬¡</strong>è°ƒç”¨æ³¨å†Œã€‚</p><p>âœ… åœ¨ä¸åŒçš„ç»„ä»¶ä¸­è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­æ³¨å†Œå‡½æ•°ä¼šå°†å…¶æ³¨å†Œåˆ°å½“å‰ç»„ä»¶ä¸Šï¼Œè¿™ä¸ªå¯ä»¥ç”±ä¸€ä¸ªå˜é‡<code>currentInstance</code> å­˜å‚¨å½“å‰ç»„ä»¶å®ä¾‹å®ç°ã€‚è¿™ä¸ªæ€è·¯å’Œ<code>activeEffect</code>ä¸€è‡´ã€‚é€šè¿‡å®ƒè·å–å½“å‰æ­£åœ¨è¢«åˆå§‹åŒ–çš„ç»„ä»¶å®ä¾‹ï¼Œä»è€Œå°†é‚£äº›é€šè¿‡ <code>onMounted</code> å‡½æ•°æ³¨å†Œçš„é’©å­å‡½æ•°ä¸ç»„ä»¶å®ä¾‹è¿›è¡Œå…³è”ã€‚</p>',4),$=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token comment"},"// å…¨å±€å˜é‡ï¼Œå­˜å‚¨å½“å‰æ­£åœ¨è¢«åˆå§‹åŒ–çš„ç»„ä»¶å®ä¾‹"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" currentInstance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"setCurrentInstance"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"instance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    currentInstance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br")])],-1),J=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("vnode"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" instance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"shallowReactive"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        isMounted"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        subTree"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        slots"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token comment"},"// å­˜å‚¨ onMounted æ³¨å†Œçš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"),(0,t.Uk)("\n        mounted"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" setupContext "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" attrs"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" emit"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n    "),(0,t._)("span",{class:"token comment"},"// åœ¨è°ƒç”¨ setup ä¹‹å‰ï¼Œè®¾ç½®å½“å‰ç»„ä»¶å®ä¾‹"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setCurrentInstance"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("prevInstance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// æ‰§è¡Œ setup å‡½æ•°"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" setupResult "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"setup"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"shallowReadonly"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" setupContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// åœ¨ setup å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œé‡ç½®å½“å‰ç»„ä»¶å®ä¾‹"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setCurrentInstance"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    \n    "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br")])],-1),V=(0,t._)("p",null,"ä»¥ä¸Šä»£ç ä»¥ onMounted å‡½æ•°ä¸ºä¾‹ã€‚åœ¨ instance.mounted æ•°ç»„å­˜å‚¨æ³¨å†Œçš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚",-1),A=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"onMounted"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"fn"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("currentInstance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        currentInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"push"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("fn"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'onMounted å‡½æ•°åªèƒ½åœ¨ setupä¸­è°ƒç”¨'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br")])],-1),N=(0,t._)("p",null,"å¯è§æ•´ä½“çš„å®ç°éå¸¸ç›´è§‚ã€‚åªéœ€è¦é€šè¿‡ currentInstance è·å–å½“å‰ç»„ä»¶å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ•°ç»„ï¼Œç„¶åæ·»åŠ å³å¯ã€‚",-1),F=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("vnode"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token comment"},"// ..."),(0,t.Uk)("\n    \n    "),(0,t._)("span",{class:"token function"},"effect"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" subTree "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isMounted"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            beforeMount "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeMount"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"patch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isMounted "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n            mounted "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token comment"},"// éå† instance.mounted æ•°ç»„å¹¶é€ä¸ªæ‰§è¡Œå³å¯"),(0,t.Uk)("\n            instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("mounted "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"hook"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"hook"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n            beforeUpdate "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeUpdate"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            "),(0,t._)("span",{class:"token function"},"patch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n            updated "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updated"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n        instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("subTree "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" subTree\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        scheduler"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" queueJob\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br")])],-1),B=(0,t._)("blockquote",null,[(0,t._)("p",null,"å¯¹äºé™¤ mounted ä»¥å¤–çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œå…¶åŸç†åŒä¸Šã€‚")],-1),K=(0,t._)("h2",{id:"æ€»ç»“",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#æ€»ç»“","aria-hidden":"true"},"#"),(0,t.Uk)(" æ€»ç»“")],-1),G=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mountComponent"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("vnode"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" isFunctional "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'function'"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" componentOptions "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("isFunctional"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    componentOptions "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      render"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n      props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("type"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" render"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" data"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" setup"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" beforeCreate"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" created"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" beforeMount"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" mounted"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" beforeUpdate"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" updated"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" propsOption "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" componentOptions\n\n  beforeCreate "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeCreate"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" state "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" data "),(0,t._)("span",{class:"token operator"},"?"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"reactive"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"data"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" attrs"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"resolveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("propsOption"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("children "),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" instance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    props"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"shallowReactive"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    isMounted"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"false"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    subTree"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    slots"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    mounted"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"emit"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("event"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("payload")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" eventName "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token template-string"},[(0,t._)("span",{class:"token template-punctuation string"},"`"),(0,t._)("span",{class:"token string"},"on"),(0,t._)("span",{class:"token interpolation"},[(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"${"),(0,t.Uk)("event"),(0,t._)("span",{class:"token punctuation"},"["),(0,t._)("span",{class:"token number"},"0"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"toUpperCase"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"+"),(0,t.Uk)(" event"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"slice"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token number"},"1"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token interpolation-punctuation punctuation"},"}")]),(0,t._)("span",{class:"token template-punctuation string"},"`")]),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" handler "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("eventName"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("handler"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"handler"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"..."),(0,t.Uk)("payload"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'äº‹ä»¶ä¸å­˜åœ¨'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token comment"},"// setup"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" setupState "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("setup"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" setupContext "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" attrs"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" emit"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" prevInstance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"setCurrentInstance"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" setupResult "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"setup"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token function"},"shallowReadonly"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" setupContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"setCurrentInstance"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("prevInstance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"typeof"),(0,t.Uk)(" setupResult "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'function'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("render"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(" console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'setup å‡½æ•°è¿”å›æ¸²æŸ“å‡½æ•°ï¼Œrender é€‰é¡¹å°†è¢«å¿½ç•¥'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      render "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" setupResult\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      setupState "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" setupContext\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  vnode"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("component "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance\n\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" renderContext "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"new"),(0,t.Uk)(),(0,t._)("span",{class:"token class-name"},"Proxy"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"get"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("t"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" k"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" r"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" slots "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" t\n\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("k "),(0,t._)("span",{class:"token operator"},"==="),(0,t.Uk)(),(0,t._)("span",{class:"token string"},"'$slots'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" slots\n\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("setupState "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" setupState"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" setupState"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'ä¸å­˜åœ¨'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token function"},"set"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("t"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" k"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" v"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" r"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" props "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" t\n      "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("state "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" state"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        state"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" v\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" v\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("setupState "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" k "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" setupState"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        setupState"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("k"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" v\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n        console"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"error"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'ä¸å­˜åœ¨'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token comment"},"// created"),(0,t.Uk)("\n  created "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"created"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n\n\n  "),(0,t._)("span",{class:"token function"},"effect"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" subTree "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"render"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token operator"},"!"),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isMounted"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      beforeMount "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeMount"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"patch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"null"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("isMounted "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token boolean"},"true"),(0,t.Uk)("\n      mounted "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("mounted "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"forEach"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"hook"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"=>"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"hook"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      beforeUpdate "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"beforeUpdate"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      "),(0,t._)("span",{class:"token function"},"patch"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" subTree"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" container"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" anchor"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n      updated "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"updated"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"call"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("renderContext"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n    instance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("subTree "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" subTree\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    scheduler"),(0,t._)("span",{class:"token operator"},":"),(0,t.Uk)(" queueJob\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"14"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"15"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"16"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"17"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"18"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"19"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"20"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"21"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"22"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"23"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"24"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"25"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"26"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"27"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"28"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"29"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"30"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"31"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"32"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"33"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"34"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"35"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"36"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"37"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"38"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"39"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"40"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"41"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"42"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"43"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"44"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"45"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"46"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"47"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"48"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"49"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"50"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"51"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"52"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"53"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"54"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"55"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"56"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"57"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"58"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"59"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"60"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"61"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"62"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"63"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"64"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"65"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"66"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"67"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"68"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"69"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"70"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"71"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"72"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"73"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"74"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"75"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"76"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"77"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"78"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"79"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"80"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"81"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"82"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"83"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"84"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"85"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"86"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"87"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"88"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"89"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"90"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"91"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"92"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"93"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"94"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"95"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"96"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"97"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"98"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"99"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"100"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"101"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"102"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"103"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"104"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"105"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"106"),(0,t._)("br")])],-1),H=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"resolveProps"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},[(0,t.Uk)("options"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" propsData")]),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" props "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" attrs "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"for"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("options "),(0,t._)("span",{class:"token operator"},"&&"),(0,t.Uk)(" key "),(0,t._)("span",{class:"token keyword"},"in"),(0,t.Uk)(" options"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"||"),(0,t.Uk)(" key"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"startsWith"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token string"},"'on'"),(0,t._)("span",{class:"token punctuation"},")"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      props"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"else"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n      attrs"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)(),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" propsData"),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)("key"),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n    "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"["),(0,t.Uk)(" props"),(0,t._)("span",{class:"token punctuation"},","),(0,t.Uk)(" attrs "),(0,t._)("span",{class:"token punctuation"},"]"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"7"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"8"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"9"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"10"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"11"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"12"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"13"),(0,t._)("br")])],-1),L=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"let"),(0,t.Uk)(" currentInstance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(),(0,t._)("span",{class:"token keyword"},"null"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"setCurrentInstance"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"instance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"const"),(0,t.Uk)(" prev "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" currentInstance\n  currentInstance "),(0,t._)("span",{class:"token operator"},"="),(0,t.Uk)(" instance\n  "),(0,t._)("span",{class:"token keyword"},"return"),(0,t.Uk)(" prev\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"6"),(0,t._)("br")])],-1),z=(0,t._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,t._)("pre",{class:"language-javascript"},[(0,t._)("code",null,[(0,t._)("span",{class:"token keyword"},"function"),(0,t.Uk)(),(0,t._)("span",{class:"token function"},"onMounted"),(0,t._)("span",{class:"token punctuation"},"("),(0,t._)("span",{class:"token parameter"},"fn"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token keyword"},"if"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("currentInstance"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)(),(0,t._)("span",{class:"token punctuation"},"{"),(0,t.Uk)("\n    currentInstance"),(0,t._)("span",{class:"token punctuation"},"."),(0,t.Uk)("mounted"),(0,t._)("span",{class:"token punctuation"},"."),(0,t._)("span",{class:"token function"},"push"),(0,t._)("span",{class:"token punctuation"},"("),(0,t.Uk)("fn"),(0,t._)("span",{class:"token punctuation"},")"),(0,t.Uk)("\n  "),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n"),(0,t._)("span",{class:"token punctuation"},"}"),(0,t.Uk)("\n")])]),(0,t._)("div",{class:"line-numbers"},[(0,t._)("span",{class:"line-number"},"1"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"2"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"3"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"4"),(0,t._)("br"),(0,t._)("span",{class:"line-number"},"5"),(0,t._)("br")])],-1),Y={render:function(n,s){const a=(0,t.up)("OutboundLink"),Y=(0,t.up)("CodeGroupItem"),Q=(0,t.up)("CodeGroup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[p,(0,t._)("p",null,[e,(0,t._)("a",o,[c,(0,t.Wm)(a)])]),l,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"resolveProps"},{default:(0,t.w5)((()=>[u])),_:1}),(0,t.Wm)(Y,{title:"props ä¸ attrs è§£æ"},{default:(0,t.w5)((()=>[k])),_:1})])),_:1}),r,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"patchComponent"},{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(Y,{title:"hasPropsChanged"},{default:(0,t.w5)((()=>[_])),_:1})])),_:1}),b,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"è¿”å› render å‡½æ•°"},{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(Y,{title:"è¿”å›å¯¹è±¡"},{default:(0,t.w5)((()=>[U])),_:1}),(0,t.Wm)(Y,{title:"å‚æ•°"},{default:(0,t.w5)((()=>[d])),_:1})])),_:1}),y,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"emit"},{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(Y,{title:"onchange"},{default:(0,t.w5)((()=>[g])),_:1}),(0,t.Wm)(Y,{title:"è™šæ‹Ÿ DOM"},{default:(0,t.w5)((()=>[v])),_:1}),(0,t.Wm)(Y,{title:"å®ç° emit"},{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(Y,{title:"resolveProps è°ƒæ•´"},{default:(0,t.w5)((()=>[h])),_:1})])),_:1}),j,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"ç»„ä»¶æ¨¡æ¿"},{default:(0,t.w5)((()=>[x,C])),_:1}),(0,t.Wm)(Y,{title:"çˆ¶ç»„ä»¶"},{default:(0,t.w5)((()=>[M,T])),_:1}),(0,t.Wm)(Y,{title:"çˆ¶ç»„ä»¶ render å‡½æ•°"},{default:(0,t.w5)((()=>[q,O])),_:1}),(0,t.Wm)(Y,{title:"MyComponent render å‡½æ•°"},{default:(0,t.w5)((()=>[W,P])),_:1}),(0,t.Wm)(Y,{title:"slots å¤„ç†"},{default:(0,t.w5)((()=>[S,D])),_:1}),(0,t.Wm)(Y,{title:"æœ€å°å®ç°"},{default:(0,t.w5)((()=>[I,R])),_:1})])),_:1}),E,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"currentInstance"},{default:(0,t.w5)((()=>[$])),_:1}),(0,t.Wm)(Y,{title:"mountComponent"},{default:(0,t.w5)((()=>[J,V])),_:1}),(0,t.Wm)(Y,{title:"onMounted"},{default:(0,t.w5)((()=>[A,N])),_:1}),(0,t.Wm)(Y,{title:"æ‰§è¡Œç”Ÿå‘½å‘¨æœŸé’©å­"},{default:(0,t.w5)((()=>[F])),_:1})])),_:1}),B,K,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{title:"mountComponent"},{default:(0,t.w5)((()=>[G])),_:1}),(0,t.Wm)(Y,{title:"resolveProps"},{default:(0,t.w5)((()=>[H])),_:1}),(0,t.Wm)(Y,{title:"setCurrentInstance"},{default:(0,t.w5)((()=>[L])),_:1}),(0,t.Wm)(Y,{title:"onMounted"},{default:(0,t.w5)((()=>[z])),_:1})])),_:1})],64)}}}}]);