"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[8981],{5823:(s,n,a)=>{a.r(n),a.d(n,{data:()=>p});const p={key:"v-be22ce60",path:"/mysql/statistics.html",title:"æ’åºèšåˆåˆ†ç»„",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"ORDER BY",slug:"order-by",children:[{level:3,title:"æ’åºä»‹ç»",slug:"æ’åºä»‹ç»",children:[]},{level:3,title:"æ’åºå®ä¾‹",slug:"æ’åºå®ä¾‹",children:[]},{level:3,title:"è‡ªå®šä¹‰æ’åº field",slug:"è‡ªå®šä¹‰æ’åº-field",children:[]}]},{level:2,title:"COUNT",slug:"count",children:[]},{level:2,title:"MIN/MAX",slug:"min-max",children:[]},{level:2,title:"SUM/AVG",slug:"sum-avg",children:[]},{level:2,title:"DISTINCT",slug:"distinct",children:[]},{level:2,title:"GROUP",slug:"group",children:[{level:3,title:"æŸ¥è¯¢æ¨¡å¼",slug:"æŸ¥è¯¢æ¨¡å¼",children:[]},{level:3,title:"å¤šä¸ªæ¡ä»¶",slug:"å¤šä¸ªæ¡ä»¶",children:[]},{level:3,title:"HAVING",slug:"having",children:[]}]}],filePathRelative:"mysql/statistics.md",git:{updatedTime:16501191e5,contributors:[{name:"Jerry Chen",email:"caffreygo@163.com",commits:3}]}}},7225:(s,n,a)=>{a.r(n),a.d(n,{default:()=>e});const p=(0,a(6252).uE)('<h1 id="æ’åºèšåˆåˆ†ç»„" tabindex="-1"><a class="header-anchor" href="#æ’åºèšåˆåˆ†ç»„" aria-hidden="true">#</a> æ’åºèšåˆåˆ†ç»„</h1><h2 id="order-by" tabindex="-1"><a class="header-anchor" href="#order-by" aria-hidden="true">#</a> ORDER BY</h2><h3 id="æ’åºä»‹ç»" tabindex="-1"><a class="header-anchor" href="#æ’åºä»‹ç»" aria-hidden="true">#</a> æ’åºä»‹ç»</h3><div class="custom-container tip"><p class="custom-container-title">mysqlå¯¹æŸ¥è¯¢ç»“æœä½¿ç”¨`order by` è¿›è¡Œæ’åº</p><ul><li>å¯¹ä»»ä½•å­—æ®µè¿›è¡Œæ’åº</li><li>descé™åºï¼Œascå‡åº</li><li>å¯¹åˆ«åå­—æ®µå¯æ’åº</li><li>å¯¹å‡½æ•°ç»“æœå¯æ’åº</li><li>æ”¯æŒå¤šåˆ—è¡¨æ’åº</li><li>æ’åºå—æ ¡å¯¹è§„åˆ™å½±å“ï¼ˆè¯·æŸ¥çœ‹å…¶ä»–ç« èŠ‚è¯¾ç¨‹äº†è§£æ ¡å¯¹è§„åˆ™ï¼‰</li></ul></div><blockquote><p>Descendingï¼šé™åºï¼›Ascendingï¼šå‡åº</p></blockquote><h3 id="æ’åºå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#æ’åºå®ä¾‹" aria-hidden="true">#</a> æ’åºå®ä¾‹</h3><p><strong>ä»ç”·åˆ°å¥³æ’åº</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> stu <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sex <span class="token keyword">ASC</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>ä»ç”·åˆ°å¥³æ’åºå¹´é¾„ä»å°åˆ°å¤§æ’åº</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> stu <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sex <span class="token keyword">ASC</span><span class="token punctuation">,</span>birthday <span class="token keyword">DESC</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>éšæœºè·å–å­¦ç”Ÿ</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> stu <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">LIMIT</span> <span class="token number">1</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>æŒ‰å‡ºç”Ÿæœˆä»½ä»å°åˆ°å¤§æ’åº</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> birthday<span class="token punctuation">,</span><span class="token keyword">MONTH</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span> <span class="token keyword">as</span> m <span class="token keyword">FROM</span> stu <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> m <span class="token keyword">ASC</span><span class="token punctuation">;</span>\n\n<span class="token comment"># æˆ–ä½¿ç”¨å­—ç¬¦ä¸²å‡½æ•°æ“ä½œ</span>\n<span class="token keyword">SELECT</span> birthday<span class="token punctuation">,</span><span class="token function">mid</span><span class="token punctuation">(</span>birthday<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> m <span class="token keyword">FROM</span> stu\n<span class="token keyword">WHERE</span> birthday <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span>\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> m <span class="token keyword">ASC</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>å¹´é¾„æœ€å¤§çš„90å</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">1990</span> <span class="token keyword">order</span> <span class="token keyword">by</span> birthday <span class="token keyword">asc</span> <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="è‡ªå®šä¹‰æ’åº-field" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ’åº-field" aria-hidden="true">#</a> è‡ªå®šä¹‰æ’åº field</h3><p>fieldå‡½æ•°ç”¨äºæ¯”è¾ƒå€¼åœ¨é›†åˆä¸­çš„ç´¢å¼•ï¼Œåˆ©ç”¨è¿™ä¸€ç‰¹æ€§å¯ä»¥è‡ªå®šä¹‰æ’åº</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> FIELD<span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment"># 2</span>\n<span class="token comment"># ç¬¬ä¸€ä¸ªa ä¸ºæ¯”è¾ƒå­—ç¬¦ï¼Œåé¢çš„ c/a/bä¸ºé›†åˆã€‚æ‰€ä»¥ç»“æœä¸º2ï¼Œå¦‚æœåœ¨é›†åˆä¸­ä¸å­˜åœ¨ä¸º0</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä½¿ç”¨ field è¿›è¡Œè‡ªå®šä¹‰æ’åºï¼ˆèµµ2 =&gt; ä½•1 =&gt; 0...ï¼‰</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> stu <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> FIELD<span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">(</span>sname<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;ä½•&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;èµµ&#39;</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="count" tabindex="-1"><a class="header-anchor" href="#count" aria-hidden="true">#</a> COUNT</h2><p><strong>ç»Ÿè®¡æ‰€æœ‰å­¦ç”Ÿäººæ•°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>æ‰€æœ‰å¥³ç”Ÿäººæ•°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># SELECT COUNT(*) FROM stu WHERE sex=2;</span>\n<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">WHERE</span> sex<span class="token operator">=</span><span class="token string">&#39;å¥³&#39;</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç»Ÿè®¡æ‰€æœ‰åˆ†é…ç­çº§çš„å­¦ç”Ÿï¼ˆcount(å­—æ®µ)ä¸ä¼šç»Ÿè®¡nullå€¼ï¼Œä½¿ç”¨count(*)æ—¶ä¼šè®¡ç®—nullï¼‰ï¼Œæ‰€ä»¥ä¸‹é¢ä½¿ç”¨å…·ä½“çš„å­—æ®µ</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># SELECT count(*) FROM stu WHERE class_id IS NOT NULL;</span>\n<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="min-max" tabindex="-1"><a class="header-anchor" href="#min-max" aria-hidden="true">#</a> MIN/MAX</h2><p><strong>è·å–æœ€å°çš„å­¦ç”Ÿå‡ºç”Ÿå¹´ä»½</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>æœ€å¤§çš„ç­çº§ç¼–å·</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">max</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>è·å–ç‚¹å‡»æ•°æœ€å°‘çš„æ–‡ç« </strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># select min(click) from article;</span>\n<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> article <span class="token keyword">WHERE</span> click <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span> <span class="token keyword">FROM</span> article<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment"># clickæ•°ä¸€æ ·çš„éƒ½ä¼šå‡ºæ¥</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="sum-avg" tabindex="-1"><a class="header-anchor" href="#sum-avg" aria-hidden="true">#</a> SUM/AVG</h2><p><strong>è·å–æ‰€æœ‰æ–‡ç« æ€»ç‚¹å‡»æ•°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span> <span class="token keyword">FROM</span> article<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>è·å–å¹³å‡ç‚¹å‡»æ•°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span> <span class="token keyword">FROM</span> article<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>è·å–ä½äºå¹³å‡ç‚¹å‡»æ•°æ®çš„æ–‡ç« ï¼šå­æŸ¥è¯¢</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> article <span class="token keyword">WHERE</span> click <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span> <span class="token keyword">FROM</span> article<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>è·å–å­¦ç”Ÿçš„å¹³å‡å¹´é¾„</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># ROUND å››èˆäº”å…¥    AVGå¹³å‡å€¼</span>\n<span class="token keyword">SELECT</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token function">AVG</span><span class="token punctuation">(</span>TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">YEAR</span><span class="token punctuation">,</span>birthday<span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="distinct" tabindex="-1"><a class="header-anchor" href="#distinct" aria-hidden="true">#</a> DISTINCT</h2><p>ğŸ”– <code>distinct</code>ç”¨äºå»é™¤ç»“æœé›†ä¸­çš„é‡å¤è®°å½•</p><p><strong>è·å–æ‰€æœ‰ç­çº§ç¼–å·</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> class_id <span class="token keyword">AS</span> class <span class="token keyword">FROM</span> stu <span class="token keyword">WHERE</span> class_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>è·å–å­¦ç”Ÿæ•°ï¼ŒåŒç­åŒåçš„ç®—ä¸€ä¸ª</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># DISTINCT class_id,sname   åŒä¸€ä¸ªç­çº§å†…åŒåçš„åªç®—ä¸€ä¸ª</span>\n<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> class_id<span class="token punctuation">,</span>sname<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">WHERE</span> class_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>è·å–ç­çº§å¹³å‡äººæ•°ï¼Œå»æ‰é‡å¤çš„æ•°å€¼</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> c <span class="token keyword">FROM</span> users <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="group" tabindex="-1"><a class="header-anchor" href="#group" aria-hidden="true">#</a> GROUP</h2><p>ğŸ”– GROUP BYæ˜¯å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„ï¼Œåº”è¯¥å‡ºç°åœ¨WHEREæ¡ä»¶çš„åé¢ã€‚ç»Ÿè®¡å—ONLY_FULL_GROUP_BYæ¨¡å¼å½±å“</p><p><strong>ç»Ÿè®¡æ¯ä¸ªç­çº§çš„äººæ•°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span><span class="token punctuation">,</span>class_id <span class="token keyword">FROM</span> stu\n<span class="token keyword">WHERE</span> class_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id <span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="æŸ¥è¯¢æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢æ¨¡å¼" aria-hidden="true">#</a> æŸ¥è¯¢æ¨¡å¼</h3><p><strong>æ¯ä¸ªç­å¹´é¾„æœ€å¤§çš„åŒå­¦</strong></p><p>ç»“æœä¸­è¦æ±‚å‡ºç°ç­çº§ç¼–å·å’Œå­¦ç”Ÿå§“åï¼Œå¦‚æœGROUP BYä¸­åªæœ‰ç­çº§ç¼–å·å­—æ®µï¼Œé»˜è®¤è¿è¡Œæ¨¡å¼ä¸‹SELECTä¸­ä¸èƒ½å‡ºç°å­¦ç”Ÿå§“åã€‚</p><div class="custom-container tip"><p class="custom-container-title">MYSQLé»˜è®¤ä½¿ç”¨ONLY_FULL_GROUP_BYæ¨¡å¼è¦æ±‚selectä¸­çš„åˆ—è¦åœ¨groupä¸­ä½¿ç”¨ã€‚æœ‰å¤šç§æ–¹å¼å¯ä»¥å¤„ç†è¿™ä¸ªé—®é¢˜</p><ul><li>å¯ä»¥é€šè¿‡æ›´æ”¹æŸ¥è¯¢æ¨¡å¼ï¼Œå…è®¸selectçš„åˆ—ä¸åœ¨groupä¸­å‡ºç°</li><li>ä½¿ç”¨èšåˆå‡½æ•°</li><li>ä½¿ç”¨any_valueå‡½æ•°å¤„ç†</li><li>GROUP BYä¸­ä½¿ç”¨PRIMAY KEY æˆ– UNIQUE NOT NULLå­—æ®µ</li></ul></div><p>ğŸ› ç›´æ¥æŸ¥è¯¢å°†äº§ç”Ÿé”™è¯¯ï¼Œå› ä¸ºsnameä¸æ˜¯GROUP BYä½¿ç”¨çš„å­—æ®µ</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># åœ¨ä½¿ç”¨minæ–¹æ³•è·å–åˆ°birthdayå­—æ®µåˆ°åŒæ—¶ï¼Œè¿˜è¦è·å–snameã€‚è¿™ç§è¯­æ³•åœ¨æ–°ç‰ˆæœ¬ä¸‹ä¼šæŠ¥é”™</span>\n<span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span>sname <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li><p>ğŸš€ ä½¿ç”¨èšåˆå‡½æ•°è§£å†³è¿™ä¸ªé—®é¢˜</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>sname<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>ğŸš€ ä½¿ç”¨any_valueå‡½æ•°è§£å†³</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span>any_value<span class="token punctuation">(</span>sname<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>ğŸš€ ä¹Ÿå¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> stu <span class="token keyword">where</span> birthday <span class="token operator">IN</span><span class="token punctuation">(</span>\n<span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>ğŸš€ ä½¿ç”¨èšåˆå‡½æ•°</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>sname<span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>ğŸš€ ä¹Ÿå¯ä»¥æ›´æ”¹æŸ¥è¯¢æ¨¡å¼ï¼Œå»æ‰ONLY_FULL_GROUP_BYæ¨¡å¼çš„æ–¹å¼è§£å†³</p><blockquote><p>å¾ˆå¤šåå°ç¨‹åºæ¡†æ¶æä¾›é…ç½®é¡¹ç”¨äºç¦æ­¢ONLY_FULL_GROUP_BYæ¨¡å¼</p></blockquote><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># SET sql_mode=&#39;&#39;</span>\n<span class="token keyword">SET</span> sql_mode <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token keyword">REPLACE</span><span class="token punctuation">(</span>@<span class="token variable">@sql_mode</span><span class="token punctuation">,</span> <span class="token string">&quot;ONLY_FULL_GROUP_BY&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>birthday<span class="token punctuation">)</span><span class="token punctuation">,</span>sname <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span><span class="token operator">=</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><h3 id="å¤šä¸ªæ¡ä»¶" tabindex="-1"><a class="header-anchor" href="#å¤šä¸ªæ¡ä»¶" aria-hidden="true">#</a> å¤šä¸ªæ¡ä»¶</h3><p><strong>ç»Ÿè®¡æ¯ç­çš„ç”·ã€å¥³æ•°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>class_id<span class="token punctuation">,</span>sex <span class="token keyword">from</span> stu\n<span class="token keyword">WHERE</span> class_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">by</span> class_id<span class="token punctuation">,</span>sex\n<span class="token keyword">ORDER</span> <span class="token keyword">by</span> class_id <span class="token keyword">ASC</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><table><thead><tr><th>count(*)</th><th>class_id</th><th>sex</th></tr></thead><tbody><tr><td>13</td><td>1</td><td>ç”·</td></tr><tr><td>11</td><td>1</td><td>å¥³</td></tr><tr><td>22</td><td>2</td><td>ç”·</td></tr><tr><td>24</td><td>2</td><td>å¥³</td></tr></tbody></table><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> concat<span class="token punctuation">(</span>class_id<span class="token punctuation">,</span><span class="token string">&#39;ç­&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">if</span><span class="token punctuation">(</span>sex<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;ç”·&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;å¥³&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sex<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu\n<span class="token keyword">WHERE</span> class_id <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">,</span>sex\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="having" tabindex="-1"><a class="header-anchor" href="#having" aria-hidden="true">#</a> HAVING</h3><p>ğŸ”– whereå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç­›é€‰ï¼Œhavingå¯¹åˆ†ç»„ç»“æœè¿›è¡Œç­›é€‰</p><p><strong>æŸ¥æ‰¾è¶…è¿‡ä¸¤ä¸ªåŒå­¦çš„ç­çº§</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> class_id<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">by</span> class_id<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><table><thead><tr><th>class_id</th><th>count(*)</th></tr></thead><tbody><tr><td>1</td><td>34</td></tr><tr><td>2</td><td>29</td></tr><tr><td>3</td><td>33</td></tr></tbody></table><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> class_id <span class="token keyword">FROM</span> stu <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id <span class="token keyword">HAVING</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">;</span>\n<span class="token comment"># æˆ–</span>\n<span class="token keyword">SELECT</span> class_id<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> c <span class="token keyword">FROM</span> stu\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> class_id <span class="token keyword">HAVING</span> c<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>æŸ¥æ‰¾æœ¬å‘¨è¿Ÿåˆ°è¶…è¿‡ä¸¤æ¬¡çš„åŒå­¦</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># select DATE_ADD(NOW(),INTERVAL 0-WEEKDAY(NOW()) day);  æœ¬å‘¨ä¸€å¯¹æ—¶é—´: 2022-04-11 22:11:58</span>\n<span class="token keyword">SELECT</span> stu_id <span class="token keyword">FROM</span> attendance \n<span class="token keyword">WHERE</span> <span class="token keyword">date</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token keyword">date</span><span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">0</span><span class="token operator">-</span>WEEKDAY<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token operator">AND</span> <span class="token keyword">time</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token string">&#39;08:30:00&#39;</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> stu_id\n<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>æœ¬å‘¨å“ªä¸ªåŒå­¦å‡†æ—¶åˆ°æ ¡æ¬¡æ•°æœ€å¤š</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> c<span class="token punctuation">,</span>stu_id <span class="token keyword">FROM</span> attendance\n<span class="token keyword">WHERE</span> <span class="token keyword">date</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token keyword">date</span><span class="token punctuation">(</span>date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">0</span><span class="token operator">-</span>WEEKDAY<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token operator">AND</span> <span class="token keyword">time</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token string">&#39;08:30:00&#39;</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> stu_id\n<span class="token keyword">ORDER</span> <span class="token keyword">by</span> c <span class="token keyword">desc</span>\n<span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>æœ¬å‘¨å“ªä¸€å¤©è¿Ÿåˆ°çš„äººæ•°æœ€å¤š</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">date</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span> <span class="token keyword">FROM</span> attendance \n<span class="token keyword">WHERE</span> <span class="token keyword">date</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token keyword">date</span><span class="token punctuation">(</span>DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">0</span><span class="token operator">-</span>WEEKDAY<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token operator">AND</span> <span class="token keyword">time</span><span class="token punctuation">(</span>created_at<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token string">&#39;08:30:00&#39;</span>\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">date</span><span class="token punctuation">(</span>create_at<span class="token punctuation">)</span>\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">DESC</span>\n<span class="token keyword">LIMIT</span> <span class="token number">1</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>æŸ¥æ‰¾å“ªä¸ªå§“çš„åŒå­¦æœ€å¤š</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">left</span><span class="token punctuation">(</span>sname<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> s<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> c <span class="token keyword">FROM</span> stu\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s\n<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> c <span class="token keyword">DESC</span>\n<span class="token keyword">LIMIT</span> <span class="token number">1</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>æŸ¥æ‰¾è¶…è¿‡ä¸¤ä¸ªåŒå­¦çš„å§“æ°</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">left</span><span class="token punctuation">(</span>sname<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> s<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> c <span class="token keyword">FROM</span> stu\n<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s\n<span class="token keyword">HAVING</span> c<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>',84),e={render:function(s,n){return p}}}}]);